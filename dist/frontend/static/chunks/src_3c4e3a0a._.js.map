{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI/B,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,6LAAC,wKAAA,CAAA,OAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;;AAIf,UAAU,WAAW,GAAG,wKAAA,CAAA,OAAuB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent }\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,sKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,sKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,6LAAC,sKAAA,CAAA,SAAuB;kBACtB,cAAA,6LAAC,sKAAA,CAAA,UAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,sKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/calendar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\r\nimport { DayPicker } from \"react-day-picker\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  ...props\r\n}: CalendarProps) {\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\"p-3\", className)}\r\n      classNames={{\r\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\r\n        month: \"space-y-4\",\r\n        caption: \"flex justify-center pt-1 relative items-center\",\r\n        caption_label: \"text-sm font-medium\",\r\n        nav: \"space-x-1 flex items-center\",\r\n        nav_button: cn(\r\n          buttonVariants({ variant: \"outline\" }),\r\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\r\n        ),\r\n        nav_button_previous: \"absolute left-1\",\r\n        nav_button_next: \"absolute right-1\",\r\n        table: \"w-full border-collapse space-y-1\",\r\n        head_row: \"flex\",\r\n        head_cell:\r\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\r\n        row: \"flex w-full mt-2\",\r\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\r\n        day: cn(\r\n          buttonVariants({ variant: \"ghost\" }),\r\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\r\n        ),\r\n        day_range_end: \"day-range-end\",\r\n        day_selected:\r\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\r\n        day_today: \"bg-accent text-accent-foreground\",\r\n        day_outside:\r\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\r\n        day_disabled: \"text-muted-foreground opacity-50\",\r\n        day_range_middle:\r\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\r\n        day_hidden: \"invisible\",\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        IconLeft: ({ className, ...props }) => (\r\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\r\n        ),\r\n        IconRight: ({ className, ...props }) => (\r\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\r\n        ),\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCalendar.displayName = \"Calendar\"\r\n\r\nexport { Calendar }\r\n"],"names":[],"mappings":";;;;AAGA;AAAA;AACA;AAEA;AACA;AAPA;;;;;;AAWA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,GAAG,OACW;IACd,qBACE,6LAAC,iKAAA,CAAA,YAAS;QACR,iBAAiB;QACjB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,OAAO;QACrB,YAAY;YACV,QAAQ;YACR,OAAO;YACP,SAAS;YACT,eAAe;YACf,KAAK;YACL,YAAY,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACX,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,EAAE;gBAAE,SAAS;YAAU,IACpC;YAEF,qBAAqB;YACrB,iBAAiB;YACjB,OAAO;YACP,UAAU;YACV,WACE;YACF,KAAK;YACL,MAAM;YACN,KAAK,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACJ,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,EAAE;gBAAE,SAAS;YAAQ,IAClC;YAEF,eAAe;YACf,cACE;YACF,WAAW;YACX,aACE;YACF,cAAc;YACd,kBACE;YACF,YAAY;YACZ,GAAG,UAAU;QACf;QACA,YAAY;YACV,UAAU,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,iBAChC,6LAAC,uNAAA,CAAA,cAAW;oBAAC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;oBAAa,GAAG,KAAK;;;;;;YAE7D,WAAW,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,iBACjC,6LAAC,yNAAA,CAAA,eAAY;oBAAC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;oBAAa,GAAG,KAAK;;;;;;QAEhE;QACC,GAAG,KAAK;;;;;;AAGf;KAvDS;AAwDT,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ScrollArea = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ScrollAreaPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative overflow-hidden\", className)}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\r\n      {children}\r\n    </ScrollAreaPrimitive.Viewport>\r\n    <ScrollBar />\r\n    <ScrollAreaPrimitive.Corner />\r\n  </ScrollAreaPrimitive.Root>\r\n))\r\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\r\n\r\nconst ScrollBar = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\r\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n    ref={ref}\r\n    orientation={orientation}\r\n    className={cn(\r\n      \"flex touch-none select-none transition-colors\",\r\n      orientation === \"vertical\" &&\r\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\r\n      orientation === \"horizontal\" &&\r\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\r\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n))\r\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\r\n\r\nexport { ScrollArea, ScrollBar }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,6KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,6LAAC,6KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,6LAAC;;;;;0BACD,6LAAC,6KAAA,CAAA,SAA0B;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,6LAAC,6KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,6KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;MAjB7C;AAoBN,UAAU,WAAW,GAAG,6KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/combobox.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { Check, ChevronsUpDown } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { ScrollArea } from \"./scroll-area\";\n\ninterface ComboboxOption {\n  value: string;\n  label: string;\n}\n\ninterface ComboboxProps {\n  options: ComboboxOption[];\n  value?: string;\n  onChange: (value: string) => void;\n  placeholder?: string;\n  searchPlaceholder?: string;\n  emptyMessage?: string;\n  className?: string;\n  disabled?: boolean;\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  popoverClassName?: string;\n  renderHeader?: () => React.ReactNode;\n  renderOption?: (option: ComboboxOption) => React.ReactNode;\n  sideOffset?: number;\n  align?: \"start\" | \"center\" | \"end\";\n}\n\nexport function Combobox({\n  options,\n  value,\n  onChange,\n  placeholder = \"Select an option...\",\n  searchPlaceholder = \"Search...\",\n  emptyMessage = \"No options found.\",\n  className,\n  disabled = false,\n  open: controlledOpen,\n  onOpenChange: setControlledOpen,\n  popoverClassName,\n  renderHeader,\n  renderOption,\n  sideOffset = 4,\n  align = \"center\",\n}: ComboboxProps) {\n  const [internalOpen, setInternalOpen] = React.useState(false);\n  const [searchValue, setSearchValue] = React.useState(\"\");\n\n  const open = controlledOpen !== undefined ? controlledOpen : internalOpen;\n  const setOpen = setControlledOpen || setInternalOpen;\n\n  const filteredOptions = React.useMemo(() => {\n    if (!searchValue) return options;\n    return options.filter((option) =>\n      option.label.toLowerCase().includes(searchValue.toLowerCase())\n    );\n  }, [options, searchValue]);\n\n  const selectedLabel = React.useMemo(() => {\n    return options.find((option) => option.value === value)?.label;\n  }, [options, value]);\n\n  React.useEffect(() => {\n    if (!open) {\n      setSearchValue(\"\");\n    }\n  }, [open]);\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          className={cn(\"w-full justify-between\", className)}\n          disabled={disabled}\n        >\n          <span className=\"truncate\">{value ? selectedLabel : placeholder}</span>\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent \n        sideOffset={sideOffset}\n        align={align}\n        className={cn(\"w-[--radix-popover-trigger-width] max-h-96 p-0 flex flex-col\", popoverClassName)}\n      >\n        <div className=\"p-2 flex-shrink-0\">\n            <Input\n                autoFocus\n                placeholder={searchPlaceholder}\n                value={searchValue}\n                onChange={(e) => setSearchValue(e.target.value)}\n                className=\"h-9\"\n            />\n        </div>\n        <div className=\"flex-grow overflow-y-auto\">\n            <ScrollArea className=\"h-full\">\n                {renderHeader && renderHeader()}\n                <div className=\"p-2 pt-0\">\n                    {filteredOptions.length === 0 && (\n                        <p className=\"py-4 text-center text-sm text-muted-foreground\">\n                            {emptyMessage}\n                        </p>\n                    )}\n                    {filteredOptions.map((option) => (\n                    <Button\n                        key={option.value}\n                        variant=\"ghost\"\n                        className=\"w-full justify-start font-normal h-auto\"\n                        onClick={() => {\n                            onChange(option.value);\n                            setOpen(false);\n                        }}\n                    >\n                        <Check\n                        className={cn(\n                            \"mr-2 h-4 w-4\",\n                            value === option.value ? \"opacity-100\" : \"opacity-0\"\n                        )}\n                        />\n                        {renderOption ? renderOption(option) : option.label}\n                    </Button>\n                    ))}\n                </div>\n            </ScrollArea>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 458, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst TooltipProvider = TooltipPrimitive.Provider\r\n\r\nconst Tooltip = TooltipPrimitive.Root\r\n\r\nconst TooltipTrigger = TooltipPrimitive.Trigger\r\n\r\nconst TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <TooltipPrimitive.Content\r\n    ref={ref}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,kBAAkB,sKAAA,CAAA,WAAyB;AAEjD,MAAM,UAAU,sKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,sKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAGpC,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC1C,6LAAC,sKAAA,CAAA,UAAwB;QACvB,KAAK;QACL,YAAY;QACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sYACA;QAED,GAAG,KAAK;;;;;;;AAGb,eAAe,WAAW,GAAG,sKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 501, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,KAAK;YACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAM,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,mBAAmB;QAAa,GAAG,KAAK;;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,2DACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+EACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,oGACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,kDAAkD;QAC/D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 639, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 687, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/dialogs/PurchaseHistoryDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { annulPurchase, getPurchaseHistory } from \"@/lib/api\";\nimport { PurchaseHistoryMovement, GroupedPurchase } from \"@/lib/types\";\nimport { format } from \"date-fns\";\nimport { es } from \"date-fns/locale\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { FileText, Pencil, Search, XCircle } from \"lucide-react\";\nimport { toastSuccess } from \"@/hooks/use-toast\";\n\ninterface PurchaseHistoryDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onViewReceipt: (purchase: GroupedPurchase) => void;\n  onEditPurchase: (purchase: GroupedPurchase) => void;\n}\n\nexport function PurchaseHistoryDialog({ open, onOpenChange, onViewReceipt, onEditPurchase }: PurchaseHistoryDialogProps) {\n  const [history, setHistory] = React.useState<GroupedPurchase[]>([]);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\n\n  const fetchHistory = React.useCallback(() => {\n    setIsLoading(true);\n    getPurchaseHistory()\n      .then(groupedPurchases => {\n          // El backend ya devuelve los datos agrupados y filtrados (sin 'Reemplazado')\n          setHistory(groupedPurchases);\n      })\n      .catch(() => {\n        // Error handled by API layer\n      })\n      .finally(() => setIsLoading(false));\n  }, []);\n\n  React.useEffect(() => {\n    if (open) {\n      fetchHistory();\n    }\n  }, [open, fetchHistory]);\n\n  const handleAnnul = async (purchase: GroupedPurchase) => {\n    if (!window.confirm(\"¿Estás seguro de que quieres anular esta compra? Esta acción no se puede deshacer.\")) return;\n\n    try {\n        await annulPurchase({ transaction_id: purchase.transaction_id });\n        toastSuccess(\"Compra Anulada\", \"La compra ha sido anulada correctamente.\");\n        fetchHistory(); // Refresh list\n    } catch (error) {\n        // Error handled by API layer\n    }\n  };\n\n  const filteredHistory = history.filter(p => {\n      const query = searchQuery.toLowerCase();\n      return p.entity_name.toLowerCase().includes(query) || (p.document_number && p.document_number.toLowerCase().includes(query)) || (p.entity_document && p.entity_document.toLowerCase().includes(query));\n  });\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl\">\n        <DialogHeader>\n          <DialogTitle>Historial de Compras</DialogTitle>\n          <DialogDescription>\n            Aquí puedes ver, editar y anular las compras registradas.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"relative\">\n            <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n            <Input\n                placeholder=\"Buscar por proveedor, RIF o factura...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-8\"\n            />\n        </div>\n        <ScrollArea className=\"h-[60vh] pr-6\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Estado</TableHead>\n                <TableHead>Fecha</TableHead>\n                <TableHead>Proveedor</TableHead>\n                <TableHead>RIF</TableHead>\n                <TableHead>Factura Nº</TableHead>\n                <TableHead className=\"text-right\">Total</TableHead>\n                <TableHead className=\"text-center\">Acciones</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {isLoading ? (\n                Array.from({ length: 5 }).map((_, i) => (\n                    <TableRow key={i}>\n                        <TableCell colSpan={7}><Skeleton className=\"h-8 w-full\" /></TableCell>\n                    </TableRow>\n                ))\n              ) : filteredHistory.length > 0 ? (\n                filteredHistory.map((purchase) => {\n                  const isAnnulled = purchase.status === 'Anulado';\n                  return (\n                    <TableRow key={purchase.transaction_id} className={isAnnulled ? \"opacity-50\" : \"\"}>\n                      <TableCell>\n                        {isAnnulled && <Badge variant=\"destructive\">Anulada</Badge>}\n                      </TableCell>\n                      <TableCell className={isAnnulled ? \"line-through\" : \"\"}>\n                        {format(new Date(purchase.transaction_date), \"dd/MM/yyyy HH:mm\", { locale: es })}\n                      </TableCell>\n                      <TableCell className={isAnnulled ? \"line-through\" : \"\"}>{purchase.entity_name}</TableCell>\n                      <TableCell className={isAnnulled ? \"line-through\" : \"\"}>{purchase.entity_document}</TableCell>\n                      <TableCell className={isAnnulled ? \"line-through\" : \"\"}>{purchase.document_number}</TableCell>\n                      <TableCell className={`text-right ${isAnnulled ? \"line-through\" : \"\"}`}>${purchase.total_cost.toFixed(2)}</TableCell>\n                      <TableCell className=\"text-center\">\n                        <TooltipProvider>\n                          <div className=\"flex justify-center items-center space-x-1\">\n                            <Tooltip>\n                              <TooltipTrigger asChild>\n                                <Button variant=\"ghost\" size=\"icon\" onClick={() => onViewReceipt(purchase)}>\n                                  <FileText className=\"h-4 w-4\" />\n                                </Button>\n                              </TooltipTrigger>\n                              <TooltipContent><p>Ver Recibo</p></TooltipContent>\n                            </Tooltip>\n                            <Tooltip>\n                              <TooltipTrigger asChild>\n                                <Button variant=\"ghost\" size=\"icon\" onClick={() => onEditPurchase(purchase)} disabled={isAnnulled}>\n                                  <Pencil className=\"h-4 w-4\" />\n                                </Button>\n                              </TooltipTrigger>\n                              <TooltipContent><p>Editar Compra</p></TooltipContent>\n                            </Tooltip>\n                            <Tooltip>\n                              <TooltipTrigger asChild>\n                                <Button variant=\"ghost\" size=\"icon\" onClick={() => handleAnnul(purchase)} disabled={isAnnulled} className=\"text-destructive hover:text-destructive\">\n                                  <XCircle className=\"h-4 w-4\" />\n                                </Button>\n                              </TooltipTrigger>\n                              <TooltipContent><p>Anular Compra</p></TooltipContent>\n                            </Tooltip>\n                          </div>\n                        </TooltipProvider>\n                      </TableCell>\n                    </TableRow>\n                  )\n                })\n              ) : (\n                <TableRow>\n                  <TableCell colSpan={7} className=\"text-center\">\n                    No se encontraron compras.\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </ScrollArea>\n      </DialogContent>\n    </Dialog>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAOA;AAQA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;AA7BA;;;;;;;;;;;;;;;AAsCO,SAAS,sBAAsB,EAAE,IAAI,EAAE,YAAY,EAAE,aAAa,EAAE,cAAc,EAA8B;;IACrH,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAc,AAAD,EAAqB,EAAE;IAClE,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAc,AAAD,EAAE;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAc,AAAD,EAAE;IAErD,MAAM,eAAe,CAAA,GAAA,6JAAA,CAAA,cAAiB,AAAD;2DAAE;YACrC,aAAa;YACb,CAAA,GAAA,oHAAA,CAAA,qBAAkB,AAAD,IACd,IAAI;mEAAC,CAAA;oBACF,6EAA6E;oBAC7E,WAAW;gBACf;kEACC,KAAK;mEAAC;gBACL,6BAA6B;gBAC/B;kEACC,OAAO;mEAAC,IAAM,aAAa;;QAChC;0DAAG,EAAE;IAEL,CAAA,GAAA,6JAAA,CAAA,YAAe,AAAD;2CAAE;YACd,IAAI,MAAM;gBACR;YACF;QACF;0CAAG;QAAC;QAAM;KAAa;IAEvB,MAAM,cAAc,OAAO;QACzB,IAAI,CAAC,OAAO,OAAO,CAAC,uFAAuF;QAE3G,IAAI;YACA,MAAM,CAAA,GAAA,oHAAA,CAAA,gBAAa,AAAD,EAAE;gBAAE,gBAAgB,SAAS,cAAc;YAAC;YAC9D,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD,EAAE,kBAAkB;YAC/B,gBAAgB,eAAe;QACnC,EAAE,OAAO,OAAO;QACZ,6BAA6B;QACjC;IACF;IAEA,MAAM,kBAAkB,QAAQ,MAAM,CAAC,CAAA;QACnC,MAAM,QAAQ,YAAY,WAAW;QACrC,OAAO,EAAE,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,UAAW,EAAE,eAAe,IAAI,EAAE,eAAe,CAAC,WAAW,GAAG,QAAQ,CAAC,UAAY,EAAE,eAAe,IAAI,EAAE,eAAe,CAAC,WAAW,GAAG,QAAQ,CAAC;IACnM;IAEA,qBACE,6LAAC,qIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,6LAAC,qIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,6LAAC,qIAAA,CAAA,eAAY;;sCACX,6LAAC,qIAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,6LAAC,qIAAA,CAAA,oBAAiB;sCAAC;;;;;;;;;;;;8BAIrB,6LAAC;oBAAI,WAAU;;sCACX,6LAAC,yMAAA,CAAA,SAAM;4BAAC,WAAU;;;;;;sCAClB,6LAAC,oIAAA,CAAA,QAAK;4BACF,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;4BAC9C,WAAU;;;;;;;;;;;;8BAGlB,6LAAC,6IAAA,CAAA,aAAU;oBAAC,WAAU;8BACpB,cAAA,6LAAC,oIAAA,CAAA,QAAK;;0CACJ,6LAAC,oIAAA,CAAA,cAAW;0CACV,cAAA,6LAAC,oIAAA,CAAA,WAAQ;;sDACP,6LAAC,oIAAA,CAAA,YAAS;sDAAC;;;;;;sDACX,6LAAC,oIAAA,CAAA,YAAS;sDAAC;;;;;;sDACX,6LAAC,oIAAA,CAAA,YAAS;sDAAC;;;;;;sDACX,6LAAC,oIAAA,CAAA,YAAS;sDAAC;;;;;;sDACX,6LAAC,oIAAA,CAAA,YAAS;sDAAC;;;;;;sDACX,6LAAC,oIAAA,CAAA,YAAS;4CAAC,WAAU;sDAAa;;;;;;sDAClC,6LAAC,oIAAA,CAAA,YAAS;4CAAC,WAAU;sDAAc;;;;;;;;;;;;;;;;;0CAGvC,6LAAC,oIAAA,CAAA,YAAS;0CACP,YACC,MAAM,IAAI,CAAC;oCAAE,QAAQ;gCAAE,GAAG,GAAG,CAAC,CAAC,GAAG,kBAC9B,6LAAC,oIAAA,CAAA,WAAQ;kDACL,cAAA,6LAAC,oIAAA,CAAA,YAAS;4CAAC,SAAS;sDAAG,cAAA,6LAAC,uIAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;;;;;;uCADhC;;;;gDAIjB,gBAAgB,MAAM,GAAG,IAC3B,gBAAgB,GAAG,CAAC,CAAC;oCACnB,MAAM,aAAa,SAAS,MAAM,KAAK;oCACvC,qBACE,6LAAC,oIAAA,CAAA,WAAQ;wCAA+B,WAAW,aAAa,eAAe;;0DAC7E,6LAAC,oIAAA,CAAA,YAAS;0DACP,4BAAc,6LAAC,oIAAA,CAAA,QAAK;oDAAC,SAAQ;8DAAc;;;;;;;;;;;0DAE9C,6LAAC,oIAAA,CAAA,YAAS;gDAAC,WAAW,aAAa,iBAAiB;0DACjD,CAAA,GAAA,yJAAA,CAAA,SAAM,AAAD,EAAE,IAAI,KAAK,SAAS,gBAAgB,GAAG,oBAAoB;oDAAE,QAAQ,+IAAA,CAAA,KAAE;gDAAC;;;;;;0DAEhF,6LAAC,oIAAA,CAAA,YAAS;gDAAC,WAAW,aAAa,iBAAiB;0DAAK,SAAS,WAAW;;;;;;0DAC7E,6LAAC,oIAAA,CAAA,YAAS;gDAAC,WAAW,aAAa,iBAAiB;0DAAK,SAAS,eAAe;;;;;;0DACjF,6LAAC,oIAAA,CAAA,YAAS;gDAAC,WAAW,aAAa,iBAAiB;0DAAK,SAAS,eAAe;;;;;;0DACjF,6LAAC,oIAAA,CAAA,YAAS;gDAAC,WAAW,CAAC,WAAW,EAAE,aAAa,iBAAiB,IAAI;;oDAAE;oDAAE,SAAS,UAAU,CAAC,OAAO,CAAC;;;;;;;0DACtG,6LAAC,oIAAA,CAAA,YAAS;gDAAC,WAAU;0DACnB,cAAA,6LAAC,sIAAA,CAAA,kBAAe;8DACd,cAAA,6LAAC;wDAAI,WAAU;;0EACb,6LAAC,sIAAA,CAAA,UAAO;;kFACN,6LAAC,sIAAA,CAAA,iBAAc;wEAAC,OAAO;kFACrB,cAAA,6LAAC,qIAAA,CAAA,SAAM;4EAAC,SAAQ;4EAAQ,MAAK;4EAAO,SAAS,IAAM,cAAc;sFAC/D,cAAA,6LAAC,iNAAA,CAAA,WAAQ;gFAAC,WAAU;;;;;;;;;;;;;;;;kFAGxB,6LAAC,sIAAA,CAAA,iBAAc;kFAAC,cAAA,6LAAC;sFAAE;;;;;;;;;;;;;;;;;0EAErB,6LAAC,sIAAA,CAAA,UAAO;;kFACN,6LAAC,sIAAA,CAAA,iBAAc;wEAAC,OAAO;kFACrB,cAAA,6LAAC,qIAAA,CAAA,SAAM;4EAAC,SAAQ;4EAAQ,MAAK;4EAAO,SAAS,IAAM,eAAe;4EAAW,UAAU;sFACrF,cAAA,6LAAC,yMAAA,CAAA,SAAM;gFAAC,WAAU;;;;;;;;;;;;;;;;kFAGtB,6LAAC,sIAAA,CAAA,iBAAc;kFAAC,cAAA,6LAAC;sFAAE;;;;;;;;;;;;;;;;;0EAErB,6LAAC,sIAAA,CAAA,UAAO;;kFACN,6LAAC,sIAAA,CAAA,iBAAc;wEAAC,OAAO;kFACrB,cAAA,6LAAC,qIAAA,CAAA,SAAM;4EAAC,SAAQ;4EAAQ,MAAK;4EAAO,SAAS,IAAM,YAAY;4EAAW,UAAU;4EAAY,WAAU;sFACxG,cAAA,6LAAC,+MAAA,CAAA,UAAO;gFAAC,WAAU;;;;;;;;;;;;;;;;kFAGvB,6LAAC,sIAAA,CAAA,iBAAc;kFAAC,cAAA,6LAAC;sFAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uCApCd,SAAS,cAAc;;;;;gCA2C1C,mBAEA,6LAAC,oIAAA,CAAA,WAAQ;8CACP,cAAA,6LAAC,oIAAA,CAAA,YAAS;wCAAC,SAAS;wCAAG,WAAU;kDAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWjE;GA5IgB;KAAA","debugId":null}},
    {"offset": {"line": 1201, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/dialogs/PurchaseReceiptDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { getStoreSettings, getPurchaseDetails, getProducts } from \"@/lib/api\";\nimport { StoreSettings, PurchasePayload, Product } from \"@/lib/types\";\nimport { format } from \"date-fns\";\nimport { es } from \"date-fns/locale\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { Printer } from \"lucide-react\";\nimport { Skeleton } from \"../ui/skeleton\";\n\ninterface PurchaseReceiptDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  transactionId: string | null;\n}\n\nfunction ReceiptSkeleton() {\n  return (\n    <div className=\"p-4\">\n      <div className=\"text-center mb-4\">\n        <Skeleton className=\"h-6 w-3/4 mx-auto\" />\n        <Skeleton className=\"h-4 w-full mt-2\" />\n        <Skeleton className=\"h-4 w-1/2 mt-1 mx-auto\" />\n      </div>\n      <Separator className=\"my-2 border-dashed\" />\n      <div className=\"space-y-2\">\n        <Skeleton className=\"h-4 w-full\" />\n        <Skeleton className=\"h-4 w-full\" />\n        <Skeleton className=\"h-4 w-2/3\" />\n      </div>\n      <Separator className=\"my-2 border-dashed\" />\n      <div className=\"space-y-2 mt-4\">\n        {Array.from({ length: 3 }).map((_, i) => (\n          <div key={i} className=\"grid grid-cols-12 gap-2\">\n            <div className=\"col-span-6\"><Skeleton className=\"h-4 w-full\" /></div>\n            <div className=\"col-span-2 text-right\"><Skeleton className=\"h-4 w-full\" /></div>\n            <div className=\"col-span-4 text-right\"><Skeleton className=\"h-4 w-full\" /></div>\n          </div>\n        ))}\n      </div>\n      <Separator className=\"my-2 border-dashed\" />\n      <div className=\"space-y-2 mt-4\">\n        <Skeleton className=\"h-5 w-1/2 ml-auto\" />\n        <Skeleton className=\"h-6 w-1/3 ml-auto mt-2\" />\n      </div>\n    </div>\n  );\n}\n\nexport function PurchaseReceiptDialog({\n  open,\n  onOpenChange,\n  transactionId,\n}: PurchaseReceiptDialogProps) {\n  const receiptRef = React.useRef<HTMLDivElement>(null);\n  const { toast } = useToast();\n  const [storeSettings, setStoreSettings] = React.useState<StoreSettings>({});\n  const [purchase, setPurchase] = React.useState<PurchasePayload | null>(null);\n  const [products, setProducts] = React.useState<Product[]>([]);\n  const [loading, setLoading] = React.useState(false);\n  const [error, setError] = React.useState<string | null>(null);\n  \n  console.log(\"Fetching purchase details for transaction ID:\", transactionId)\n\n  React.useEffect(() => {\n    if (open && transactionId) {\n      setLoading(true);\n      setError(null);\n      setPurchase(null);\n\n\n      Promise.all([\n        getPurchaseDetails(transactionId),\n        getProducts(),\n        getStoreSettings()\n      ]).then(([purchaseData, productsData, settingsData]) => {\n        setPurchase(purchaseData);\n        setProducts(productsData);\n        setStoreSettings(settingsData);\n      }).catch(() => {\n        setError(\"No se pudieron cargar los detalles del recibo.\");\n        toast({ variant: \"destructive\", title: \"Error\", description: \"No se pudieron cargar los detalles del recibo.\" });\n      }).finally(() => {\n        setLoading(false);\n      });\n    }\n  }, [open, transactionId, toast]);\n\n  const handlePrint = () => {\n    const printContents = receiptRef.current?.innerHTML;\n    if (!printContents) {\n        toast({\n            variant: \"destructive\",\n            title: \"Error de Impresión\",\n            description: \"No se pudo encontrar el contenido del recibo.\",\n        });\n        return;\n    }\n\n    const printWindow = window.open(\"\", \"_blank\");\n    if (printWindow) {\n        printWindow.document.write(`\n        <html>\n            <head>\n            <title>Recibo de Compra</title>\n            <style>\n                body { font-family: 'Courier New', Courier, monospace; margin: 20px; }\n                .receipt-container { width: 300px; margin: 0 auto; }\n                .header { text-align: center; }\n                .item { display: flex; justify-content: space-between; }\n                .total { font-weight: bold; }\n                hr { border: none; border-top: 1px dashed #000; }\n            </style>\n            </head>\n            <body>${printContents}</body>\n        </html>`);\n        printWindow.document.close();\n        printWindow.focus();\n        printWindow.print();\n        printWindow.close();\n    }\n  };\n\n  const renderContent = () => {\n    if (loading) {\n      return <ReceiptSkeleton />;\n    }\n    if (error) {\n      return <div className=\"p-4 text-center text-red-500\">{error}</div>;\n    }\n    if (!purchase) {\n      return <div className=\"p-4 text-center\">No hay datos de compra para mostrar.</div>;\n    }\n\n    const findProduct = (id: number) => products.find((p) => p.id === id);\n    const subtotal = purchase.items.reduce((acc, item) => acc + (item.quantity * item.unitCost), 0);\n    const totalTaxes = purchase.items.reduce((acc, item) => {\n        const product = findProduct(item.productId);\n        const taxRate = product?.tax_rate ?? 0;\n        return acc + (item.quantity * item.unitCost * (taxRate / 100));\n    }, 0);\n    const total = subtotal + totalTaxes;\n\n    return (\n      <div ref={receiptRef} className=\"text-sm font-mono p-4\">\n        <div className=\"text-center mb-4\">\n            <h3 className=\"font-bold text-lg\">{storeSettings.name || \"Mi Tienda\"}</h3>\n            <p>{storeSettings.address || \"\"}</p>\n            <p>{storeSettings.phone || \"\"}</p>\n        </div>\n        <Separator className=\"my-2 border-dashed\" />\n        <div className=\"flex justify-between\">\n            <span>Factura #:</span>\n            <span>{purchase.document_number || \"N/A\"}</span>\n        </div>\n        <div className=\"flex justify-between\">\n            <span>Fecha:</span>\n            <span>{format(new Date(purchase.transaction_date), \"dd/MM/yyyy HH:mm\", { locale: es })}</span>\n        </div>\n        <div className=\"flex justify-between\">\n            <span>Proveedor:</span>\n            <span>{purchase.entity_name || \"N/A\"}</span>\n        </div>\n          <div className=\"flex justify-between\">\n            <span>RIF:</span>\n            <span>{purchase.entity_document || \"N/A\"}</span>\n        </div>\n        <Separator className=\"my-2 border-dashed\" />\n        <div>\n            <div className=\"grid grid-cols-12 gap-2 font-bold\">\n                <div className=\"col-span-6\">Producto</div>\n                <div className=\"col-span-2 text-right\">Cant</div>\n                <div className=\"col-span-4 text-right\">Subtotal</div>\n            </div>\n            {purchase.items.map((item, index) => {\n                const product = findProduct(item.productId);\n                return (\n                    <div key={`${item.productId}-${index}`} className=\"grid grid-cols-12 gap-2\">\n                        <div className=\"col-span-6 truncate\">{product?.name || \"N/A\"}</div>\n                        <div className=\"col-span-2 text-right\">{item.quantity}</div>\n                        <div className=\"col-span-4 text-right\">{(item.quantity * item.unitCost).toFixed(2)}</div>\n                    </div>\n                );\n            })}\n        </div>\n        <Separator className=\"my-2 border-dashed\" />\n          <div className=\"flex justify-between\">\n            <span>Subtotal:</span>\n            <span>${subtotal.toFixed(2)}</span>\n        </div>\n          <div className=\"flex justify-between\">\n            <span>Impuestos:</span>\n            <span>${totalTaxes.toFixed(2)}</span>\n        </div>\n        <div className=\"flex justify-between font-bold text-base mt-2\">\n            <span>TOTAL:</span>\n            <span>${total.toFixed(2)}</span>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Recibo de Compra</DialogTitle>\n          <DialogDescription>\n            Detalles de la compra registrada. Puedes imprimir este recibo.\n          </DialogDescription>\n        </DialogHeader>\n        <ScrollArea className=\"max-h-[60vh]\">\n          {renderContent()}\n        </ScrollArea>\n        <DialogFooter className=\"sm:justify-end gap-2\">\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button type=\"button\" variant=\"outline\" size=\"icon\" onClick={handlePrint} disabled={loading || !!error || !purchase}>\n                  <Printer className=\"h-4 w-4\" />\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent>\n                <p>Imprimir</p>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1961, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-background text-foreground\",\r\n        destructive:\r\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Alert = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\r\n>(({ className, variant, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    role=\"alert\"\r\n    className={cn(alertVariants({ variant }), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlert.displayName = \"Alert\"\r\n\r\nconst AlertTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h5\r\n    ref={ref}\r\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertTitle.displayName = \"AlertTitle\"\r\n\r\nconst AlertDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDescription.displayName = \"AlertDescription\"\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,6LAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2038, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/dialogs/PurchaseConfirmationDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { PurchaseItemPayload, Product } from \"@/lib/types\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport { AlertTriangle } from \"lucide-react\";\n\ninterface PurchaseConfirmationDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  purchaseItems: (PurchaseItemPayload & { productName: string })[];\n  onConfirm: () => void;\n  isSaving: boolean;\n}\n\nexport function PurchaseConfirmationDialog({\n  open,\n  onOpenChange,\n  purchaseItems,\n  onConfirm,\n  isSaving,\n}: PurchaseConfirmationDialogProps) {\n  if (!purchaseItems || purchaseItems.length === 0) {\n    return null;\n  }\n\n  const total = purchaseItems.reduce(\n    (acc, item) => acc + item.quantity * item.unitCost,\n    0\n  );\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Confirmar Registro de Compra</DialogTitle>\n          <DialogDescription>\n            Revisa los productos y totales. Esta acción registrará la entrada en el inventario.\n          </DialogDescription>\n        </DialogHeader>\n        \n        <Alert>\n            <AlertTriangle className=\"h-4 w-4\" />\n            <AlertTitle>¡Atención!</AlertTitle>\n            <AlertDescription>\n                Los productos duplicados han sido consolidados en una sola línea.\n            </AlertDescription>\n        </Alert>\n\n        <ScrollArea className=\"h-[40vh] pr-6\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Producto</TableHead>\n                <TableHead className=\"text-right\">Cantidad</TableHead>\n                <TableHead className=\"text-right\">Costo Unitario</TableHead>\n                <TableHead className=\"text-right\">Subtotal</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {purchaseItems.map((item) => (\n                <TableRow key={item.productId}>\n                  <TableCell>{item.productName}</TableCell>\n                  <TableCell className=\"text-right\">{item.quantity}</TableCell>\n                  <TableCell className=\"text-right\">${item.unitCost.toFixed(2)}</TableCell>\n                  <TableCell className=\"text-right\">\n                    ${(item.quantity * item.unitCost).toFixed(2)}\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </ScrollArea>\n\n        <div className=\"text-right font-bold text-lg pr-6\">\n            Total de la Compra: ${total.toFixed(2)}\n        </div>\n\n        <DialogFooter>\n          <Button\n            variant=\"outline\"\n            onClick={() => onOpenChange(false)}\n            disabled={isSaving}\n          >\n            Cancelar\n          </Button>\n          <Button onClick={onConfirm} disabled={isSaving}>\n            {isSaving ? \"Guardando...\" : \"Confirmar y Guardar\"}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAQA;AAQA;AACA;AAEA;AACA;AAtBA;;;;;;;;AAgCO,SAAS,2BAA2B,EACzC,IAAI,EACJ,YAAY,EACZ,aAAa,EACb,SAAS,EACT,QAAQ,EACwB;IAChC,IAAI,CAAC,iBAAiB,cAAc,MAAM,KAAK,GAAG;QAChD,OAAO;IACT;IAEA,MAAM,QAAQ,cAAc,MAAM,CAChC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,GAAG,KAAK,QAAQ,EAClD;IAGF,qBACE,6LAAC,qIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,6LAAC,qIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,6LAAC,qIAAA,CAAA,eAAY;;sCACX,6LAAC,qIAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,6LAAC,qIAAA,CAAA,oBAAiB;sCAAC;;;;;;;;;;;;8BAKrB,6LAAC,oIAAA,CAAA,QAAK;;sCACF,6LAAC,2NAAA,CAAA,gBAAa;4BAAC,WAAU;;;;;;sCACzB,6LAAC,oIAAA,CAAA,aAAU;sCAAC;;;;;;sCACZ,6LAAC,oIAAA,CAAA,mBAAgB;sCAAC;;;;;;;;;;;;8BAKtB,6LAAC,6IAAA,CAAA,aAAU;oBAAC,WAAU;8BACpB,cAAA,6LAAC,oIAAA,CAAA,QAAK;;0CACJ,6LAAC,oIAAA,CAAA,cAAW;0CACV,cAAA,6LAAC,oIAAA,CAAA,WAAQ;;sDACP,6LAAC,oIAAA,CAAA,YAAS;sDAAC;;;;;;sDACX,6LAAC,oIAAA,CAAA,YAAS;4CAAC,WAAU;sDAAa;;;;;;sDAClC,6LAAC,oIAAA,CAAA,YAAS;4CAAC,WAAU;sDAAa;;;;;;sDAClC,6LAAC,oIAAA,CAAA,YAAS;4CAAC,WAAU;sDAAa;;;;;;;;;;;;;;;;;0CAGtC,6LAAC,oIAAA,CAAA,YAAS;0CACP,cAAc,GAAG,CAAC,CAAC,qBAClB,6LAAC,oIAAA,CAAA,WAAQ;;0DACP,6LAAC,oIAAA,CAAA,YAAS;0DAAE,KAAK,WAAW;;;;;;0DAC5B,6LAAC,oIAAA,CAAA,YAAS;gDAAC,WAAU;0DAAc,KAAK,QAAQ;;;;;;0DAChD,6LAAC,oIAAA,CAAA,YAAS;gDAAC,WAAU;;oDAAa;oDAAE,KAAK,QAAQ,CAAC,OAAO,CAAC;;;;;;;0DAC1D,6LAAC,oIAAA,CAAA,YAAS;gDAAC,WAAU;;oDAAa;oDAC9B,CAAC,KAAK,QAAQ,GAAG,KAAK,QAAQ,EAAE,OAAO,CAAC;;;;;;;;uCAL/B,KAAK,SAAS;;;;;;;;;;;;;;;;;;;;;8BAarC,6LAAC;oBAAI,WAAU;;wBAAoC;wBACzB,MAAM,OAAO,CAAC;;;;;;;8BAGxC,6LAAC,qIAAA,CAAA,eAAY;;sCACX,6LAAC,qIAAA,CAAA,SAAM;4BACL,SAAQ;4BACR,SAAS,IAAM,aAAa;4BAC5B,UAAU;sCACX;;;;;;sCAGD,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAS;4BAAW,UAAU;sCACnC,WAAW,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAMzC;KA9EgB","debugId":null}},
    {"offset": {"line": 2291, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,6LAAC,qKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,qKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2334, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\r\n\r\nimport {cn} from '@/lib/utils';\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\r\n  ({className, ...props}, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nTextarea.displayName = 'Textarea';\r\n\r\nexport {Textarea};\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2369, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/dialogs/ProductDialog.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Switch } from '@/components/ui/switch';\nimport { toastSuccess, toastError } from '@/hooks/use-toast';\nimport { Textarea } from '@/components/ui/textarea';\nimport { createProduct, updateProduct } from '@/lib/api';\nimport { Product } from '@/lib/types';\n\ninterface ProductDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  product: Partial<Product> | null;\n  onProductSaved: (product: Product) => void;\n  generateSku?: () => string;\n}\n\nexport function ProductDialog({ open, onOpenChange, product, onProductSaved, generateSku }: ProductDialogProps) {\n  const [editingProduct, setEditingProduct] = useState<Partial<Product> | null>(null);\n  const [isTaxExempt, setIsTaxExempt] = useState(false);\n  const [formErrors, setFormErrors] = useState<{ price?: string; stock?: string; tax_rate?: string }>({});\n\n  useEffect(() => {\n    if (product) {\n      const initialProduct = { ...product };\n      if (product.id === undefined && generateSku) {\n        initialProduct.sku = generateSku();\n      }\n      // Si no hay tasa de impuesto definida, se asume 16 por defecto.\n      if (initialProduct.tax_rate === undefined) {\n        initialProduct.tax_rate = 16.00;\n      }\n      setEditingProduct(initialProduct);\n      // El producto es exento si su tasa es 0.\n      setIsTaxExempt(initialProduct.tax_rate === 0);\n    } else {\n      setEditingProduct(null);\n      setIsTaxExempt(false); // Reset al cerrar\n    }\n  }, [product, generateSku]);\n\n  const handleSave = async () => {\n    if (!editingProduct) return;\n\n    const newErrors: { price?: string; stock?: string; tax_rate?: string } = {};\n    if (editingProduct.price === '' || editingProduct.price === null || isNaN(Number(editingProduct.price))) {\n      newErrors.price = 'El precio es obligatorio y debe ser un número.';\n    }\n    if (editingProduct.stock === '' || editingProduct.stock === null || isNaN(Number(editingProduct.stock))) {\n      newErrors.stock = 'El stock es obligatorio y debe ser un número.';\n    }\n    if (!isTaxExempt && (editingProduct.tax_rate === '' || editingProduct.tax_rate === null || isNaN(Number(editingProduct.tax_rate)))) {\n        newErrors.tax_rate = 'La tasa de impuesto es obligatoria y debe ser un número.';\n    }\n\n\n    setFormErrors(newErrors);\n\n    if (Object.keys(newErrors).length > 0) {\n      Object.values(newErrors).forEach(error => {\n        toastError(\"Error de validación\", error as string);\n      });\n      return;\n    }\n\n    const productToSave = {\n      ...editingProduct,\n      price: parseFloat(String(editingProduct.price)),\n      stock: parseInt(String(editingProduct.stock), 10),\n      status: editingProduct.status ?? 'Activo',\n      tax_rate: isTaxExempt ? 0 : parseFloat(String(editingProduct.tax_rate)),\n    };\n\n    try {\n      if ('id' in productToSave && productToSave.id) {\n        // UPDATE operation\n        await updateProduct(productToSave.id, productToSave);\n        onProductSaved(productToSave as Product); // Pass the local state which has the updates\n      } else {\n        // CREATE operation\n        const newProduct = await createProduct(productToSave); // newProduct has the ID from the backend\n        onProductSaved(newProduct); // Pass the backend response\n      }\n      handleClose();\n    } catch (e: any) {\n      console.error(\"Error al guardar el producto:\", e);\n      // The API layer already shows an error toast\n    }\n  };\n\n  const handleClose = () => {\n    onOpenChange(false);\n    setFormErrors({});\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>{editingProduct?.id ? 'Editar Producto' : 'Añadir Nuevo Producto'}</DialogTitle>\n          <DialogDescription>\n            {editingProduct?.id ? 'Modifica los detalles del producto.' : 'Completa los detalles para crear un nuevo producto.'}\n          </DialogDescription>\n        </DialogHeader>\n        {editingProduct && (\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"name\" className=\"text-right\">Nombre</Label>\n              <Input id=\"name\" value={editingProduct.name} onChange={(e) => setEditingProduct({ ...editingProduct, name: e.target.value })} className=\"col-span-3\" />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"sku\" className=\"text-right\">SKU</Label>\n              <Input id=\"sku\" value={editingProduct.sku ?? ''} onChange={(e) => setEditingProduct({ ...editingProduct, sku: e.target.value })} className=\"col-span-3\" />\n            </div>\n            <div className=\"grid grid-cols-4 items-start gap-4\">\n              <Label htmlFor=\"description\" className=\"text-right pt-2\">Descripción</Label>\n              <Textarea id=\"description\" value={editingProduct.description ?? ''} onChange={(e) => setEditingProduct({ ...editingProduct, description: e.target.value })} className=\"col-span-3\" rows={3} />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"price\" className=\"text-right\">Precio</Label>\n              <Input\n                id=\"price\"\n                type=\"text\"\n                value={editingProduct.price ?? ''}\n                onChange={(e) => {\n                  setEditingProduct({ ...editingProduct, price: e.target.value });\n                  if (formErrors.price) setFormErrors({ ...formErrors, price: undefined });\n                }}\n                className={`col-span-3 ${formErrors.price ? 'border-red-500' : ''}`}\n              />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"stock\" className=\"text-right\">Stock</Label>\n              <Input\n                id=\"stock\"\n                type=\"text\"\n                value={editingProduct.stock ?? ''}\n                onChange={(e) => {\n                  setEditingProduct({ ...editingProduct, stock: e.target.value });\n                  if (formErrors.stock) setFormErrors({ ...formErrors, stock: undefined });\n                }}\n                className={`col-span-3 ${formErrors.stock ? 'border-red-500' : ''}`}\n              />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n                <Label htmlFor=\"tax-exempt\" className=\"text-right\">Exento</Label>\n                <div className=\"flex items-center space-x-2 col-span-3\">\n                    <Switch\n                        id=\"tax-exempt\"\n                        checked={isTaxExempt}\n                        onCheckedChange={setIsTaxExempt}\n                    />\n                    <Label htmlFor=\"tax-exempt\" className=\"font-normal\">\n                        {isTaxExempt ? 'Sí, exento de impuestos' : 'No, sujeto a impuestos'}\n                    </Label>\n                </div>\n            </div>\n            {!isTaxExempt && (\n                <div className=\"grid grid-cols-4 items-center gap-4\">\n                    <Label htmlFor=\"tax_rate\" className=\"text-right\">Tasa (%)</Label>\n                    <Input\n                        id=\"tax_rate\"\n                        type=\"text\"\n                        value={editingProduct.tax_rate ?? '16'}\n                        onChange={(e) => {\n                            setEditingProduct({ ...editingProduct, tax_rate: e.target.value });\n                            if (formErrors.tax_rate) setFormErrors({ ...formErrors, tax_rate: undefined });\n                        }}\n                        className={`col-span-3 ${formErrors.tax_rate ? 'border-red-500' : ''}`}\n                    />\n                </div>\n            )}\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"status\" className=\"text-right\">Estado</Label>\n              <div className=\"flex items-center space-x-2 col-span-3\">\n                <Switch\n                  id=\"status\"\n                  checked={editingProduct.status === 'Activo'}\n                  onCheckedChange={(isChecked) =>\n                    setEditingProduct({ ...editingProduct, status: isChecked ? 'Activo' : 'Inactivo' })\n                  }\n                />\n                <Label htmlFor=\"status\" className=\"font-normal\">\n                  {editingProduct.status}\n                </Label>\n              </div>\n            </div>\n          </div>\n        )}\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={handleClose}>Cancelar</Button>\n          <Button type=\"submit\" onClick={handleSave}>Guardar</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2859, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/app/%28app%29/purchases/page.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { format } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport { Calendar as CalendarIcon, PlusCircle, Trash2, History, Loader2, ListRestart, Trash, XCircle } from 'lucide-react';\n\nimport { useBackendStatus } from '@/app/(app)/layout';\nimport { getProducts, createPurchase, updatePurchase, Product, getStores, getStoreDetails, getPendingTransactions, addPendingTransaction, removePendingTransaction } from '@/lib/api';\nimport { PurchasePayload, GroupedPurchase, PurchaseItemPayload } from '@/lib/types';\nimport { cn } from '@/lib/utils';\nimport { toastSuccess, toastError } from '@/hooks/use-toast';\n\nimport { Card, CardContent, CardHeader, CardTitle, CardFooter, CardDescription } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Separator } from '@/components/ui/separator';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Calendar } from '@/components/ui/calendar';\nimport { Combobox } from '@/components/ui/combobox';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { PurchaseHistoryDialog } from '@/components/dialogs/PurchaseHistoryDialog';\nimport { PurchaseReceiptDialog } from '@/components/dialogs/PurchaseReceiptDialog';\nimport { PurchaseConfirmationDialog } from '@/components/dialogs/PurchaseConfirmationDialog';\nimport { ProductDialog } from '@/components/dialogs/ProductDialog';\n\ninterface CartItem {\n  id: string;\n  productId: number | null;\n  name: string;\n  quantity: number;\n  unitCost: number;\n  tax_rate: number;\n}\n\ninterface PendingPurchase {\n    id: string;\n    cart: CartItem[];\n    date: Date;\n    supplier: string;\n    supplierRif: string;\n    invoiceNumber: string;\n    createdAt: Date;\n}\n\nconst createEmptyCartItem = (): CartItem => ({\n    id: `temp-${Date.now()}-${Math.random()}`,\n    productId: null,\n    name: '',\n    quantity: 1,\n    unitCost: 0,\n    tax_rate: 0,\n});\n\nexport default function PurchasesPage() {\n    const [date, setDate] = React.useState<Date>(new Date());\n    const [supplier, setSupplier] = React.useState('');\n    const [supplierRif, setSupplierRif] = React.useState('');\n    const [invoiceNumber, setInvoiceNumber] = React.useState('');\n    \n    const [products, setProducts] = React.useState<Product[]>([]);\n    const [cart, setCart] = React.useState<CartItem[]>([createEmptyCartItem()]);\n    \n    const [isLoading, setIsLoading] = React.useState(false);\n    const [isLoadingProducts, setIsLoadingProducts] = React.useState(true);\n    const [openComboboxIndex, setOpenComboboxIndex] = React.useState<number | null>(null);\n\n    const [pendingPurchases, setPendingPurchases] = React.useState<PendingPurchase[]>([]);\n    const [isHistoryOpen, setIsHistoryOpen] = React.useState(false);\n    const [isReceiptOpen, setIsReceiptOpen] = React.useState(false);\n    const [isConfirmationOpen, setIsConfirmationOpen] = React.useState(false);\n    const [consolidatedItems, setConsolidatedItems] = React.useState<(PurchaseItemPayload & { productName: string })[]>([]);\n    const [selectedTransactionId, setSelectedTransactionId] = React.useState<string | null>(null);\n    const [editingTransactionId, setEditingTransactionId] = React.useState<string | null>(null);\n    const [isProductDialogOpen, setIsProductDialogOpen] = React.useState(false);\n    const [productDialogInitialData, setProductDialogInitialData] = React.useState<Partial<Product> | null>(null);\n\n    const [storeSettings, setStoreSettings] = React.useState<any>({});\n\n    const { isBackendReady, refetchKey, triggerRefetch } = useBackendStatus();\n\n    React.useEffect(() => {\n        if (!isBackendReady) return;\n        const fetchInitialData = async () => {\n            setIsLoadingProducts(true);\n            try {\n                const { activeStoreId } = await getStores();\n                const [productsData, settingsData, pendingData] = await Promise.all([\n                    getProducts(),\n                    getStoreDetails(activeStoreId),\n                    getPendingTransactions()\n                ]);\n                setProducts(productsData);\n                setStoreSettings(settingsData || {});\n                setPendingPurchases(pendingData.purchases || []);\n            } catch (error) {} finally {\n                setIsLoadingProducts(false);\n            }\n        };\n        fetchInitialData();\n    }, [isBackendReady, refetchKey]);\n\n    const productMap = React.useMemo(() => new Map(products.map(p => [p.id, p])), [products]);\n    \n    const productOptions = React.useMemo(() => {\n        const showInactive = storeSettings.advanced?.showInactiveProducts || false;\n        return products\n            .filter(p => showInactive || p.status === 'Activo')\n            .map(p => ({ \n                value: String(p.id), \n                label: `(${p.sku || 'N/A'}) ${p.name}`\n            }));\n    }, [products, storeSettings]);\n\n    const resetForm = () => {\n        setDate(new Date());\n        setSupplier('');\n        setSupplierRif('');\n        setInvoiceNumber('');\n        setCart([createEmptyCartItem()]);\n        setOpenComboboxIndex(null);\n        setEditingTransactionId(null);\n    };\n\n    const handleCartItemChange = (index: number, field: keyof Omit<CartItem, 'id' | 'name' | 'tax_rate'>, value: any) => {\n        const newItems = [...cart];\n        const item = newItems[index];\n        \n        if (field === 'productId') {\n            const selectedProduct = productMap.get(Number(value));\n            if (selectedProduct) {\n                item.productId = selectedProduct.id;\n                item.name = selectedProduct.name;\n                item.unitCost = selectedProduct.price;\n                item.tax_rate = selectedProduct.tax_rate;\n            }\n        } else {\n            item[field as 'quantity' | 'unitCost'] = Number(value);\n        }\n        setCart(newItems);\n    };\n\n    const addCartItem = () => {\n        setCart(prevItems => [...prevItems, createEmptyCartItem()]);\n        setOpenComboboxIndex(cart.length);\n    };\n\n    const removeCartItem = (index: number) => {\n        setCart(cart.filter((_, i) => i !== index));\n    };\n\n    const handleOpenConfirmation = () => {\n        const itemMap = new Map<number, PurchaseItemPayload & { productName: string }>();\n\n        cart\n            .filter(item => item.productId !== null)\n            .forEach(item => {\n                const productId = item.productId!;\n                if (itemMap.has(productId)) {\n                    const existing = itemMap.get(productId)!;\n                    existing.quantity += item.quantity;\n                } else {\n                    itemMap.set(productId, {\n                        productId: productId,\n                        productName: item.name,\n                        quantity: item.quantity,\n                        unitCost: item.unitCost,\n                    });\n                }\n            });\n        \n        const finalItems = Array.from(itemMap.values());\n        setConsolidatedItems(finalItems);\n        setIsConfirmationOpen(true);\n    };\n\n    const handleFormSubmit = async () => {\n        setIsLoading(true);\n        \n        const purchasePayload: PurchasePayload = {\n            transaction_date: date.toISOString(),\n            entity_name: supplier || undefined,\n            entity_document: supplierRif || undefined,\n            document_number: invoiceNumber || undefined,\n            items: consolidatedItems.map(({ productName, ...item }) => item),\n        };\n\n        try {\n            if (editingTransactionId) {\n                await updatePurchase({ transaction_id: editingTransactionId, purchaseData: purchasePayload });\n                toastSuccess(\"Compra Actualizada\", \"La compra se ha modificado exitosamente.\");\n                setSelectedTransactionId(editingTransactionId);\n                setIsReceiptOpen(true);\n            } else {\n                const response = await createPurchase(purchasePayload);\n                toastSuccess(\"Compra Registrada\", \"La compra se ha guardado exitosamente.\");\n                setSelectedTransactionId(response.transaction_id); // Usar el ID devuelto por el backend\n                setIsReceiptOpen(true);\n            }\n            \n            triggerRefetch();\n            resetForm();\n            setIsHistoryOpen(false);\n        } catch (error) {\n            // El toast de error ya se muestra en la capa de API\n        } finally {\n            setIsLoading(false);\n            setIsConfirmationOpen(false);\n        }\n    };\n\n    const handleEditPurchase = (purchase: GroupedPurchase) => {\n        setDate(new Date(purchase.transaction_date));\n        setSupplier(purchase.entity_name);\n        setSupplierRif(purchase.entity_document !== 'N/A' ? purchase.entity_document : '');\n        setInvoiceNumber(purchase.document_number);\n        \n        // Consolidate items before setting the cart\n        const consolidatedItems = new Map<number, CartItem>();\n        purchase.movements.forEach(m => {\n            const product = productMap.get(m.productId);\n            if (consolidatedItems.has(m.productId)) {\n                const existing = consolidatedItems.get(m.productId)!;\n                existing.quantity += m.quantity;\n            } else {\n                consolidatedItems.set(m.productId, {\n                    id: `edit-consolidated-${m.productId}`,\n                    productId: m.productId,\n                    name: m.productName,\n                    quantity: m.quantity,\n                    unitCost: m.unit_cost,\n                    tax_rate: product?.tax_rate || 0,\n                });\n            }\n        });\n\n        setCart(Array.from(consolidatedItems.values()));\n        \n        setEditingTransactionId(purchase.transaction_id);\n        setIsHistoryOpen(false);\n    };\n\n    const handleViewReceiptFromHistory = (purchase: GroupedPurchase) => {\n        setSelectedTransactionId(purchase.transaction_id);\n        setIsReceiptOpen(true);\n    };\n\n    const handleHoldPurchase = async () => {\n        if (cart.every(item => item.productId === null)) {\n            toastError(\"Compra Vacía\", \"No puedes poner en espera una compra sin productos.\");\n            return;\n        }\n        const newPendingPurchase: PendingPurchase = { \n            id: `pending-${Date.now()}`, \n            cart, \n            date, \n            supplier, \n            supplierRif, \n            invoiceNumber, \n            createdAt: new Date() \n        };\n        \n        try {\n            await addPendingTransaction('purchase', newPendingPurchase);\n            toastSuccess(\"Compra en Espera\", \"La compra actual se ha guardado.\");\n            resetForm();\n            triggerRefetch();\n        } catch (error) {}\n    };\n\n    const handleRestorePurchase = async (purchaseToRestore: PendingPurchase) => {\n        const restoredDate = new Date(purchaseToRestore.date);\n        const isValidDate = !isNaN(restoredDate.getTime());\n\n        const existingProductIds = new Set(products.map(p => p.id));\n        const validCartItems = purchaseToRestore.cart.filter(item => item.productId && existingProductIds.has(item.productId));\n        const missingItems = purchaseToRestore.cart.filter(item => !item.productId || !existingProductIds.has(item.productId));\n\n        if (missingItems.length > 0) {\n            const missingNames = missingItems.map(item => item.name || `ID ${item.productId}`).join(', ');\n            toastError(\n                `${missingItems.length} Producto(s) no Encontrado(s)`,\n                `Omitidos: ${missingNames}`\n            );\n        }\n\n        setCart(validCartItems.length > 0 ? validCartItems : [createEmptyCartItem()]);\n        setDate(isValidDate ? restoredDate : new Date());\n        setSupplier(purchaseToRestore.supplier);\n        setSupplierRif(purchaseToRestore.supplierRif);\n        setInvoiceNumber(purchaseToRestore.invoiceNumber);\n        \n        try {\n            await removePendingTransaction(purchaseToRestore.id);\n            toastSuccess(\"Compra Restaurada\", \"La compra ha sido cargada en el formulario.\");\n            triggerRefetch();\n        } catch (error) {\n            // El error ya se maneja en la capa de API\n        }\n    };\n\n    const handleRemovePendingPurchase = async (id: string) => {\n        try {\n            await removePendingTransaction(id);\n            toastSuccess(\"Compra Descartada\", \"La compra en espera ha sido eliminada.\");\n            triggerRefetch();\n        } catch (error) {}\n    };\n\n    const handleOpenNewProductDialog = () => {\n        const generateNextSku = () => {\n            if (products.length === 0) return '1';\n            const maxSku = products.reduce((max, p) => {\n                const skuNumber = parseInt(p.sku || '0', 10);\n                return !isNaN(skuNumber) && skuNumber > max ? skuNumber : max;\n            }, 0);\n            return (maxSku + 1).toString();\n        };\n        setProductDialogInitialData({\n            name: '',\n            price: 0,\n            stock: 0,\n            status: 'Activo',\n            sku: generateNextSku(),\n        });\n        setIsProductDialogOpen(true);\n    };\n\n    const handleProductSaved = (savedProduct: Product) => {\n        setProducts(currentProducts => [...currentProducts, savedProduct]);\n        const newItems = [...cart];\n        const firstEmptyIndex = newItems.findIndex(item => item.productId === null);\n        const newItemLine = {\n            id: `temp-${Date.now()}`,\n            productId: savedProduct.id,\n            name: savedProduct.name,\n            quantity: 1,\n            unitCost: savedProduct.price ?? 0,\n            tax_rate: savedProduct.tax_rate ?? 0,\n        };\n        if (firstEmptyIndex !== -1) {\n            newItems[firstEmptyIndex] = newItemLine;\n            setCart(newItems);\n        } else {\n            setCart(prev => [...prev, newItemLine]);\n        }\n        toastSuccess(\"Producto Guardado\", `El producto \"${savedProduct.name}\" ha sido añadido a la compra.`);\n        setIsProductDialogOpen(false);\n        triggerRefetch(); \n    };\n\n    const subtotal = cart.reduce((acc, item) => acc + item.quantity * item.unitCost, 0);\n    const totalTaxes = cart.reduce((acc, item) => acc + (item.quantity * item.unitCost * (item.tax_rate / 100)), 0);\n    const total = subtotal + totalTaxes;\n\n    const isSubmitDisabled = cart.some(item => !item.productId || item.quantity <= 0) || isLoading;\n\n    const renderComboboxHeader = () => (\n        <div className=\"grid grid-cols-12 gap-4 px-3 py-2 text-xs font-semibold text-muted-foreground bg-muted\">\n            <div className=\"col-span-2 text-center\">Código</div>\n            <div className=\"col-span-4 text-center\">Producto</div>\n            <div className=\"col-span-2 text-right\">Stock</div>\n            <div className=\"col-span-2 text-right\">Costo</div>\n            <div className=\"col-span-2 text-right\">IVA</div>\n        </div>\n    );\n\n    const renderComboboxOption = (option: { value: string; label: string }) => {\n        const product = productMap.get(Number(option.value));\n        if (!product) return <div>{option.label}</div>;\n        return (\n            <div className=\"grid grid-cols-12 gap-4 w-full text-sm\">\n                <div className=\"col-span-2 font-mono text-xs text-center\">{product.sku || 'N/A'}</div>\n                <div className=\"col-span-4 truncate\" title={product.name}>{product.name}</div>\n                <div className=\"col-span-2 text-right\">{product.stock}</div>\n                <div className=\"col-span-2 text-right\">${product.price.toFixed(2)}</div>\n                <div className=\"col-span-2 text-right\">{product.tax_rate.toFixed(2)}%</div>\n            </div>\n        );\n    };\n\n    return (\n        <TooltipProvider>\n        <div className=\"flex flex-col gap-6\">\n            <div className=\"flex items-center justify-between\">\n                <div className=\"flex-1\">\n                    <h1 className=\"font-semibold text-lg md:text-2xl\">Compras</h1>\n                    <p className=\"text-sm text-muted-foreground\">{editingTransactionId ? `Editando compra a ${supplier}` : \"Registra nuevas órdenes de compra.\"}</p>\n                </div>\n                <Button variant=\"outline\" onClick={() => setIsHistoryOpen(true)} disabled={editingTransactionId !== null}>\n                    <History className=\"mr-2 h-4 w-4\" />\n                    Historial\n                </Button>\n            </div>\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start\">\n                <div className=\"lg:col-span-2 space-y-6\">\n                    <Card>\n                        <CardHeader><CardTitle>{editingTransactionId ? \"Editar Orden de Compra\" : \"Nueva Orden de Compra\"}</CardTitle></CardHeader>\n                        <CardContent>\n                        <div className=\"grid gap-6\">\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                <div className=\"grid gap-2\"><Label htmlFor=\"supplier\">Proveedor</Label><Input id=\"supplier\" value={supplier} onChange={e => setSupplier(e.target.value)} placeholder=\"Nombre del proveedor\" /></div>\n                                <div className=\"grid gap-2\"><Label htmlFor=\"supplierRif\">RIF Proveedor</Label><Input id=\"supplierRif\" value={supplierRif} onChange={e => setSupplierRif(e.target.value)} placeholder=\"Ej: J-12345678\" /></div>\n                            </div>\n                            <div>\n                                <div className=\"grid grid-cols-12 gap-2 items-center mb-2 px-1\">\n                                    <div className=\"col-span-12 md:col-span-6\"><Label className=\"text-sm font-medium\">Producto</Label></div>\n                                    <div className=\"col-span-4 md:col-span-2\"><Label className=\"text-sm font-medium\">Cantidad</Label></div>\n                                    <div className=\"col-span-4 md:col-span-2\"><Label className=\"text-sm font-medium\">Costo Unit.</Label></div>\n                                    <div className=\"col-span-4 md:col-span-2\"><Label className=\"text-sm font-medium text-right w-full pr-2\">Acción</Label></div>\n                                </div>\n                                <div className=\"grid gap-4 border p-4 rounded-md\">\n                                    {cart.map((item, index) => (\n                                        <div key={item.id} className=\"grid grid-cols-12 gap-2 items-end\">\n                                            <div className=\"col-span-12 md:col-span-6\">\n                                                <Combobox \n                                                    open={openComboboxIndex === index} \n                                                    onOpenChange={(isOpen) => setOpenComboboxIndex(isOpen ? index : null)} \n                                                    options={productOptions} \n                                                    value={item.productId ? String(item.productId) : ''} \n                                                    onChange={(value) => { handleCartItemChange(index, 'productId', value); setOpenComboboxIndex(null); }} \n                                                    placeholder={isLoadingProducts ? \"Cargando...\" : \"Seleccionar...\"} \n                                                    searchPlaceholder=\"Buscar por código o nombre...\" \n                                                    emptyMessage=\"No hay productos.\" \n                                                    disabled={isLoadingProducts}\n                                                    popoverClassName=\"w-[700px]\"\n                                                    align=\"start\"\n                                                    sideOffset={10}\n                                                    renderHeader={renderComboboxHeader}\n                                                    renderOption={renderComboboxOption}\n                                                />\n                                            </div>\n                                            <div className=\"col-span-4 md:col-span-2\"><Input type=\"number\" value={item.quantity} onChange={(e) => handleCartItemChange(index, 'quantity', e.target.value)} min=\"1\" /></div>\n                                            <div className=\"col-span-4 md:col-span-2\"><Input type=\"number\" value={item.unitCost} onChange={(e) => handleCartItemChange(index, 'unitCost', e.target.value)} min=\"0\" /></div>\n                                            <div className=\"col-span-4 md:col-span-2 flex justify-end\"><Button variant=\"outline\" size=\"icon\" className=\"text-muted-foreground\" onClick={() => removeCartItem(index)} disabled={cart.length <= 1}><Trash2 className=\"h-4 w-4\"/></Button></div>\n                                        </div>\n                                    ))}\n                                </div>\n                                <div className=\"flex items-center gap-2 mt-4\">\n                                    <Button size=\"sm\" className=\"gap-1\" onClick={addCartItem}><PlusCircle className=\"h-3.5 w-3.5\" />Añadir Producto</Button>\n                                    <Button variant=\"outline\" size=\"sm\" className=\"gap-1\" onClick={handleOpenNewProductDialog}><PlusCircle className=\"h-3.5 w-3.5\" />Crear Producto</Button>\n                                </div>\n                            </div>\n                        </div>\n                        </CardContent>\n                    </Card>\n                </div>\n\n                <div className=\"space-y-6\">\n                    <Card>\n                        <CardHeader><CardTitle>Configuración</CardTitle></CardHeader>\n                        <CardContent className=\"space-y-4\">\n                            <div className=\"grid gap-2\"><Label>Fecha de Compra</Label><Popover><PopoverTrigger asChild><Button variant={\"outline\"} className={cn(\"w-full justify-start text-left font-normal\", !date && \"text-muted-foreground\")}><CalendarIcon className=\"mr-2 h-4 w-4\" />{date ? format(date, \"PPP\", { locale: es }) : <span>Seleccione fecha</span>}</Button></PopoverTrigger><PopoverContent className=\"w-auto p-0\"><Calendar mode=\"single\" selected={date} onSelect={(d) => setDate(d || new Date())} initialFocus /></PopoverContent></Popover></div>\n                            <div className=\"grid gap-2\"><Label htmlFor=\"invoiceNumber\">Nº de Factura</Label><Input id=\"invoiceNumber\" value={invoiceNumber} onChange={e => setInvoiceNumber(e.target.value)} placeholder=\"Opcional\" /></div>\n                        </CardContent>\n                    </Card>\n\n                    <Card>\n                        <CardHeader><CardTitle>Resumen de Compra</CardTitle></CardHeader>\n                        <CardContent className=\"grid gap-4\">\n                            <div className=\"flex justify-between\"><span>Subtotal</span><span>${subtotal.toFixed(2)}</span></div>\n                            <div className=\"flex justify-between\"><span>Impuestos</span><span>${totalTaxes.toFixed(2)}</span></div>\n                            <Separator />\n                            <div className=\"flex justify-between font-semibold text-lg\"><span>Total</span><span>${total.toFixed(2)}</span></div>\n                        </CardContent>\n                    </Card>\n\n                    <div className=\"flex flex-col gap-2\">\n                         <Button onClick={handleOpenConfirmation} disabled={isSubmitDisabled} size=\"lg\">\n                            {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                            {isLoading ? \"Procesando...\" : (editingTransactionId ? \"Guardar Cambios\" : \"Registrar Compra\")}\n                        </Button>\n                        {editingTransactionId && (<Button variant=\"ghost\" onClick={resetForm}><XCircle className=\"mr-2 h-4 w-4\" />Cancelar Edición</Button>)}\n                        <Button variant=\"secondary\" onClick={handleHoldPurchase} disabled={editingTransactionId !== null}>Poner en Espera</Button>\n                    </div>\n\n                    {pendingPurchases.length > 0 && (\n                        <Card>\n                            <CardHeader><CardTitle>Compras en Espera</CardTitle><CardDescription>Restaura o elimina las compras pendientes.</CardDescription></CardHeader>\n                            <CardContent className=\"space-y-4\">\n                                {pendingPurchases.map((purchase) => (\n                                    <div key={purchase.id} className=\"flex items-center justify-between p-2 border rounded-lg\">\n                                        <div>\n                                            <p className=\"font-medium\">{purchase.supplier || \"Proveedor General\"}</p>\n                                            <p className=\"text-sm text-muted-foreground\">{purchase.cart.length} producto(s) - {format(new Date(purchase.createdAt) || new Date(), \"p\", { locale: es })}</p>\n                                        </div>\n                                        <div className=\"flex items-center gap-2\">\n                                            <Tooltip><TooltipTrigger asChild><Button variant=\"outline\" size=\"icon\" onClick={() => handleRestorePurchase(purchase)}><ListRestart className=\"h-4 w-4\" /></Button></TooltipTrigger><TooltipContent><p>Restaurar</p></TooltipContent></Tooltip>\n                                            <Tooltip><TooltipTrigger asChild><Button variant=\"destructive\" size=\"icon\" onClick={() => handleRemovePendingPurchase(purchase.id)}><Trash className=\"h-4 w-4\" /></Button></TooltipTrigger><TooltipContent><p>Eliminar</p></TooltipContent></Tooltip>\n                                        </div>\n                                    </div>\n                                ))}\n                            </CardContent>\n                        </Card>\n                    )}\n                </div>\n            </div>\n        </div>\n        <ProductDialog \n            open={isProductDialogOpen} \n            onOpenChange={setIsProductDialogOpen} \n            product={productDialogInitialData} \n            onProductSaved={handleProductSaved} \n        />\n        <PurchaseHistoryDialog open={isHistoryOpen} onOpenChange={setIsHistoryOpen} onViewReceipt={handleViewReceiptFromHistory} onEditPurchase={handleEditPurchase} />\n        <PurchaseReceiptDialog \n            open={isReceiptOpen} \n            onOpenChange={(open) => {\n                console.log(\"Receipt dialog, open:\", open);\n                console.log(\"Selected transaction ID:\", selectedTransactionId);\n                if (!open) {\n                    setSelectedTransactionId(null);\n                }\n                setIsReceiptOpen(open);\n            }} \n            transactionId={selectedTransactionId} \n        />\n        <PurchaseConfirmationDialog \n            open={isConfirmationOpen} \n            onOpenChange={setIsConfirmationOpen}\n            purchaseItems={consolidatedItems}\n            onConfirm={handleFormSubmit}\n            isSaving={isLoading}\n        />\n        </TooltipProvider>\n    )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}