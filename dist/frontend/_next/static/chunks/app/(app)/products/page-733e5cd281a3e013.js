(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[548],{333:(e,s,a)=>{"use strict";a.d(s,{d:()=>i});var r=a(5155),t=a(2115),l=a(4884),n=a(9434);let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...t,ref:s,children:(0,r.jsx)(l.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});i.displayName=l.bL.displayName},934:(e,s,a)=>{Promise.resolve().then(a.bind(a,7615))},1475:(e,s,a)=>{"use strict";a.d(s,{E:()=>x});var r=a(5155),t=a(2115),l=a(285),n=a(4165),i=a(5057),c=a(2523),d=a(333),o=a(1689),u=a(8539),m=a(5731);function x(e){var s,a,x,h,p;let{open:j,onOpenChange:g,product:f,onProductSaved:v,generateSku:N}=e,[b,y]=(0,t.useState)(null),[k,w]=(0,t.useState)(!1),[C,E]=(0,t.useState)({});(0,t.useEffect)(()=>{if(f){let e={...f};void 0===f.id&&N&&(e.sku=N()),void 0===e.tax_rate&&(e.tax_rate=16),y(e),w(0===e.tax_rate)}else y(null),w(!1)},[f,N]);let A=async()=>{var e;if(!b)return;let s={};if((""===b.price||null===b.price||isNaN(Number(b.price)))&&(s.price="El precio es obligatorio y debe ser un n\xfamero."),(""===b.stock||null===b.stock||isNaN(Number(b.stock)))&&(s.stock="El stock es obligatorio y debe ser un n\xfamero."),!k&&(""===b.tax_rate||null===b.tax_rate||isNaN(Number(b.tax_rate)))&&(s.tax_rate="La tasa de impuesto es obligatoria y debe ser un n\xfamero."),E(s),Object.keys(s).length>0)return void Object.values(s).forEach(e=>{(0,o.Kf)("Error de validaci\xf3n",e)});let a={...b,price:parseFloat(String(b.price)),stock:parseInt(String(b.stock),10),status:null!=(e=b.status)?e:"Activo",tax_rate:k?0:parseFloat(String(b.tax_rate))};try{if("id"in a&&a.id)await (0,m.vc)(a.id,a),v(a);else{let e=await (0,m.WY)(a);v(e)}S()}catch(e){console.error("Error al guardar el producto:",e)}},S=()=>{g(!1),E({})};return(0,r.jsx)(n.lG,{open:j,onOpenChange:g,children:(0,r.jsxs)(n.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(n.c7,{children:[(0,r.jsx)(n.L3,{children:(null==b?void 0:b.id)?"Editar Producto":"A\xf1adir Nuevo Producto"}),(0,r.jsx)(n.rr,{children:(null==b?void 0:b.id)?"Modifica los detalles del producto.":"Completa los detalles para crear un nuevo producto."})]}),b&&(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(i.J,{htmlFor:"name",className:"text-right",children:"Nombre"}),(0,r.jsx)(c.p,{id:"name",value:b.name,onChange:e=>y({...b,name:e.target.value}),className:"col-span-3"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(i.J,{htmlFor:"sku",className:"text-right",children:"SKU"}),(0,r.jsx)(c.p,{id:"sku",value:null!=(s=b.sku)?s:"",onChange:e=>y({...b,sku:e.target.value}),className:"col-span-3"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-start gap-4",children:[(0,r.jsx)(i.J,{htmlFor:"description",className:"text-right pt-2",children:"Descripci\xf3n"}),(0,r.jsx)(u.T,{id:"description",value:null!=(a=b.description)?a:"",onChange:e=>y({...b,description:e.target.value}),className:"col-span-3",rows:3})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(i.J,{htmlFor:"price",className:"text-right",children:"Precio"}),(0,r.jsx)(c.p,{id:"price",type:"text",value:null!=(x=b.price)?x:"",onChange:e=>{y({...b,price:e.target.value}),C.price&&E({...C,price:void 0})},className:"col-span-3 ".concat(C.price?"border-red-500":"")})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(i.J,{htmlFor:"stock",className:"text-right",children:"Stock"}),(0,r.jsx)(c.p,{id:"stock",type:"text",value:null!=(h=b.stock)?h:"",onChange:e=>{y({...b,stock:e.target.value}),C.stock&&E({...C,stock:void 0})},className:"col-span-3 ".concat(C.stock?"border-red-500":"")})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(i.J,{htmlFor:"tax-exempt",className:"text-right",children:"Exento"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 col-span-3",children:[(0,r.jsx)(d.d,{id:"tax-exempt",checked:k,onCheckedChange:w}),(0,r.jsx)(i.J,{htmlFor:"tax-exempt",className:"font-normal",children:k?"S\xed, exento de impuestos":"No, sujeto a impuestos"})]})]}),!k&&(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(i.J,{htmlFor:"tax_rate",className:"text-right",children:"Tasa (%)"}),(0,r.jsx)(c.p,{id:"tax_rate",type:"text",value:null!=(p=b.tax_rate)?p:"16",onChange:e=>{y({...b,tax_rate:e.target.value}),C.tax_rate&&E({...C,tax_rate:void 0})},className:"col-span-3 ".concat(C.tax_rate?"border-red-500":"")})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(i.J,{htmlFor:"status",className:"text-right",children:"Estado"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 col-span-3",children:[(0,r.jsx)(d.d,{id:"status",checked:"Activo"===b.status,onCheckedChange:e=>y({...b,status:e?"Activo":"Inactivo"})}),(0,r.jsx)(i.J,{htmlFor:"status",className:"font-normal",children:b.status})]})]})]}),(0,r.jsxs)(n.Es,{children:[(0,r.jsx)(l.$,{variant:"outline",onClick:S,children:"Cancelar"}),(0,r.jsx)(l.$,{type:"submit",onClick:A,children:"Guardar"})]})]})})}},5127:(e,s,a)=>{"use strict";a.d(s,{A0:()=>i,BF:()=>c,Hj:()=>d,XI:()=>n,nA:()=>u,nd:()=>o});var r=a(5155),t=a(2115),l=a(9434);let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",a),...t})})});n.displayName="Table";let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",a),...t})});i.displayName="TableHeader";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...t})});c.displayName="TableBody",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t})}).displayName="TableFooter";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t})});d.displayName="TableRow";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t})});o.displayName="TableHead";let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t})});u.displayName="TableCell",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...t})}).displayName="TableCaption"},6126:(e,s,a)=>{"use strict";a.d(s,{E:()=>i});var r=a(5155);a(2115);var t=a(2085),l=a(9434);let n=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)(n({variant:a}),s),...t})}},6424:(e,s,a)=>{"use strict";a.d(s,{F:()=>i});var r=a(5155),t=a(2115),l=a(7655),n=a(9434);let i=t.forwardRef((e,s)=>{let{className:a,children:t,...i}=e;return(0,r.jsxs)(l.bL,{ref:s,className:(0,n.cn)("relative overflow-hidden",a),...i,children:[(0,r.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,r.jsx)(c,{}),(0,r.jsx)(l.OK,{})]})});i.displayName=l.bL.displayName;let c=t.forwardRef((e,s)=>{let{className:a,orientation:t="vertical",...i}=e;return(0,r.jsx)(l.VM,{ref:s,orientation:t,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,r.jsx)(l.lr,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=l.VM.displayName},7615:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>O});var r=a(5155),t=a(2115),l=a(6766),n=a(4301),i=a(5074),c=a(9240),d=a(5731),o=a(285),u=a(6695),m=a(5127),x=a(2523),h=a(8856),p=a(1475),j=a(4165),g=a(6424),f=a(6126),v=a(3013),N=a(1055),b=a(9145),y=a(3380),k=a(7223),w=a(2011),C=a(8763),E=a(5057),A=a(9409),S=a(8539),_=a(1689);function F(e){let{open:s,onOpenChange:a,product:l,onMovementRegistered:n}=e,[i,c]=t.useState("RETIRO"),[u,m]=t.useState(1),[h,p]=t.useState(""),[g,f]=t.useState(!1),v=async()=>{if(!l)return;if(u<=0)return void(0,_.Kf)("Error de Validaci\xf3n","La cantidad debe ser mayor que cero.");if(u>l.stock)return void(0,_.Kf)("Error de Validaci\xf3n","La cantidad a retirar no puede ser mayor que el stock actual.");f(!0);let e={product_id:l.id,type:i,quantity:u,description:h,unit_cost:0};console.log("Enviando al backend:",JSON.stringify(e,null,2));try{await (0,d.er)(e),(0,_.tP)("Movimiento Registrado","El movimiento de inventario se ha registrado correctamente."),n(),a(!1)}catch(e){}finally{f(!1)}};return(t.useEffect(()=>{s&&(c("RETIRO"),m(1),p(""))},[s]),l)?(0,r.jsx)(j.lG,{open:s,onOpenChange:a,children:(0,r.jsxs)(j.Cf,{className:"sm:max-w-md",children:[(0,r.jsxs)(j.c7,{children:[(0,r.jsx)(j.L3,{children:"Registrar Movimiento de Inventario"}),(0,r.jsxs)(j.rr,{children:['Registra una salida de "',l.name,'" que no sea una venta.']})]}),(0,r.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,r.jsxs)("div",{className:"grid gap-3",children:[(0,r.jsx)(E.J,{htmlFor:"movement-type",children:"Tipo de Movimiento"}),(0,r.jsxs)(A.l6,{value:i,onValueChange:e=>c(e),children:[(0,r.jsx)(A.bq,{id:"movement-type",children:(0,r.jsx)(A.yv,{placeholder:"Seleccione un tipo..."})}),(0,r.jsxs)(A.gC,{children:[(0,r.jsx)(A.eb,{value:"RETIRO",children:"Retiro (ej. producto da\xf1ado)"}),(0,r.jsx)(A.eb,{value:"AUTO-CONSUMO",children:"Autoconsumo (ej. uso interno)"})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-3",children:[(0,r.jsx)(E.J,{htmlFor:"quantity",children:"Cantidad"}),(0,r.jsx)(x.p,{id:"quantity",type:"number",value:u,onChange:e=>m(Number(e.target.value)),min:"1",max:l.stock}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Stock actual: ",l.stock]})]}),(0,r.jsxs)("div",{className:"grid gap-3",children:[(0,r.jsx)(E.J,{htmlFor:"description",children:"Descripci\xf3n (Opcional)"}),(0,r.jsx)(S.T,{id:"description",value:h,onChange:e=>p(e.target.value),placeholder:"Ej: Retiro por producto vencido"})]})]}),(0,r.jsxs)(j.Es,{children:[(0,r.jsx)(o.$,{variant:"outline",onClick:()=>a(!1),disabled:g,children:"Cancelar"}),(0,r.jsx)(o.$,{onClick:v,disabled:g,children:g?"Guardando...":"Registrar Movimiento"})]})]})}):null}function R(e){let{open:s,onOpenChange:a,product:l,onEdit:n,onDelete:i,onDataChange:c}=e,[u,x]=t.useState([]),[p,E]=t.useState(!1),[A,S]=t.useState(!1),_=t.useCallback(()=>{l&&(E(!0),(0,d.I7)(l.id).then(x).catch(()=>{}).finally(()=>E(!1)))},[l]);if(t.useEffect(()=>{s&&l&&_()},[s,l,_]),!l)return null;let R=e=>{var s,a;let{move:t}=e,l="ENTRADA"===t.type,n=t.transaction_date||t.created_at;return(0,r.jsxs)(m.Hj,{children:[(0,r.jsx)(m.nA,{children:(0,v.GP)(new Date(n),"dd/MM/yyyy HH:mm",{locale:N.es})}),(0,r.jsx)(m.nA,{children:(0,r.jsxs)(f.E,{variant:l?"default":"secondary",className:"flex items-center w-fit",children:[l?(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4 text-green-400"}):(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4 text-red-400"}),t.type]})}),(0,r.jsx)(m.nA,{className:"text-right",children:t.quantity}),(0,r.jsxs)(m.nA,{className:"text-right",children:["$",null!=(a=null==(s=t.unit_cost)?void 0:s.toFixed(2))?a:"N/A"]}),(0,r.jsx)(m.nA,{className:"text-muted-foreground truncate",title:t.description,children:t.description})]})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.lG,{open:s,onOpenChange:a,children:(0,r.jsxs)(j.Cf,{className:"max-w-4xl",children:[(0,r.jsxs)(j.c7,{children:[(0,r.jsx)(j.L3,{children:l.name}),(0,r.jsxs)(j.rr,{children:["SKU: ",l.sku||"N/A"," - Historial completo de movimientos."]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 my-4",children:[(0,r.jsxs)("div",{className:"md:col-span-1 space-y-4",children:[(0,r.jsx)("h3",{className:"font-semibold border-b pb-2",children:"Detalles del Producto"}),(0,r.jsxs)("div",{className:"text-sm space-y-2",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Stock Actual:"})," ",l.stock]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Costo Promedio:"})," $",l.price.toFixed(2)]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Tasa de Impuesto:"})," ",l.tax_rate,"%"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("strong",{children:"Estado:"})," ",(0,r.jsx)(f.E,{variant:"Activo"===l.status?"default":"destructive",children:l.status})]}),l.description&&(0,r.jsxs)("div",{className:"pt-2",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Descripci\xf3n:"}),(0,r.jsx)("p",{className:"text-muted-foreground whitespace-pre-wrap",children:l.description})]})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("h3",{className:"font-semibold border-b pb-2 mb-2",children:"Historial de Movimientos (Kardex)"}),(0,r.jsx)(g.F,{className:"h-64",children:(0,r.jsxs)(m.XI,{children:[(0,r.jsx)(m.A0,{children:(0,r.jsxs)(m.Hj,{children:[(0,r.jsx)(m.nd,{children:"Fecha"}),(0,r.jsx)(m.nd,{children:"Tipo"}),(0,r.jsx)(m.nd,{className:"text-right",children:"Cantidad"}),(0,r.jsx)(m.nd,{className:"text-right",children:"Costo/Precio"}),(0,r.jsx)(m.nd,{children:"Descripci\xf3n"})]})}),(0,r.jsx)(m.BF,{children:p?Array.from({length:3}).map((e,s)=>(0,r.jsx)(m.Hj,{children:(0,r.jsx)(m.nA,{colSpan:5,children:(0,r.jsx)(h.E,{className:"h-5 w-full"})})},s)):u.length>0?u.map(e=>(0,r.jsx)(R,{move:e},e.id)):(0,r.jsx)(m.Hj,{children:(0,r.jsx)(m.nA,{colSpan:5,className:"text-center",children:"No hay movimientos para este producto."})})})]})})]})]}),(0,r.jsxs)(j.Es,{className:"sm:justify-between",children:[(0,r.jsxs)(o.$,{variant:"destructive",onClick:()=>i(l.id),children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Eliminar"]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(o.$,{variant:"outline",onClick:()=>S(!0),children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Registrar Movimiento"]}),(0,r.jsxs)(o.$,{onClick:()=>n(l),children:[(0,r.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Editar"]})]})]})]})}),(0,r.jsx)(F,{open:A,onOpenChange:S,product:l,onMovementRegistered:()=>{_(),c()}})]})}function T(){return(0,r.jsxs)(m.XI,{children:[(0,r.jsx)(m.A0,{children:(0,r.jsxs)(m.Hj,{children:[(0,r.jsx)(m.nd,{className:"hidden w-[100px] sm:table-cell",children:(0,r.jsx)("span",{className:"sr-only",children:"Imagen"})}),(0,r.jsx)(m.nd,{children:"C\xf3digo"}),(0,r.jsx)(m.nd,{children:"Nombre"}),(0,r.jsx)(m.nd,{className:"hidden md:table-cell",children:"Precio"}),(0,r.jsx)(m.nd,{className:"hidden md:table-cell",children:"Stock"})]})}),(0,r.jsx)(m.BF,{children:Array.from({length:5}).map((e,s)=>(0,r.jsxs)(m.Hj,{children:[(0,r.jsx)(m.nA,{className:"hidden sm:table-cell",children:(0,r.jsx)(h.E,{className:"h-16 w-16 rounded-md"})}),(0,r.jsx)(m.nA,{children:(0,r.jsx)(h.E,{className:"h-4 w-20"})}),(0,r.jsx)(m.nA,{children:(0,r.jsx)(h.E,{className:"h-4 w-32"})}),(0,r.jsx)(m.nA,{className:"hidden md:table-cell",children:(0,r.jsx)(h.E,{className:"h-4 w-16"})}),(0,r.jsx)(m.nA,{className:"hidden md:table-cell",children:(0,r.jsx)(h.E,{className:"h-4 w-12"})})]},s))})]})}function O(){let[e,s]=(0,t.useState)([]),[a,h]=(0,t.useState)({}),[j,g]=(0,t.useState)(!0),[f,v]=(0,t.useState)(null),[N,b]=(0,t.useState)(!1),[y,k]=(0,t.useState)(!1),[w,C]=(0,t.useState)(null),[E,A]=(0,t.useState)(""),{isBackendReady:S,triggerRefetch:F,refetchKey:O}=(0,c.useBackendStatus)();(0,t.useEffect)(()=>{if(!S){g(!0),v("Esperando conexi\xf3n con el backend...");return}(async()=>{g(!0),v(null);try{let{activeStoreId:e}=await (0,d.Dv)(),[a,r]=await Promise.all([(0,d.d$)(),(0,d.GZ)(e)]);s(a),h(r||{})}catch(e){console.error(e)}finally{g(!1)}})()},[S,O]);let P=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar este producto? Esta acci\xf3n no se puede deshacer."))try{await (0,d.DD)(e),(0,_.tP)("Producto Eliminado","El producto ha sido eliminado correctamente."),k(!1),C(null),F()}catch(e){console.error("Error al eliminar el producto:",e)}},I=e=>{C(e),k(!0)},H=e.filter(e=>{var s,r,t;if(!(null==(s=a.advanced)?void 0:s.showInactiveProducts)&&"Inactivo"===e.status)return!1;let l=E.toLowerCase(),n=e.name.toLowerCase().includes(l),i=null!=(t=null==(r=e.sku)?void 0:r.toLowerCase().includes(l))&&t;return n||i});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h1",{className:"font-semibold text-lg md:text-2xl",children:"Productos"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Gestiona tus productos aqu\xed."})]}),(0,r.jsxs)(o.$,{size:"sm",className:"gap-1",onClick:()=>{C(null),b(!0)},children:[(0,r.jsx)(n.A,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"A\xf1adir Producto"})]})]}),(0,r.jsxs)(u.Zp,{children:[(0,r.jsx)(u.aR,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(x.p,{type:"search",placeholder:"Buscar por nombre o c\xf3digo...",className:"w-full appearance-none bg-background pl-8 shadow-none md:w-1/3 lg:w-1/3",value:E,onChange:e=>A(e.target.value)})]})}),(0,r.jsx)(u.Wu,{children:j?(0,r.jsx)(T,{}):f?(0,r.jsx)("div",{className:"text-center py-10 text-red-500",children:f}):(0,r.jsxs)(m.XI,{children:[(0,r.jsx)(m.A0,{children:(0,r.jsxs)(m.Hj,{children:[(0,r.jsx)(m.nd,{className:"hidden w-[100px] sm:table-cell",children:"Imagen"}),(0,r.jsx)(m.nd,{children:"C\xf3digo"}),(0,r.jsx)(m.nd,{children:"Nombre"}),(0,r.jsx)(m.nd,{className:"hidden md:table-cell",children:"Precio"}),(0,r.jsx)(m.nd,{className:"hidden md:table-cell",children:"Stock"})]})}),(0,r.jsx)(m.BF,{children:H.map(e=>{var s,a;return(0,r.jsxs)(m.Hj,{onClick:()=>I(e),className:"cursor-pointer",children:[(0,r.jsx)(m.nA,{className:"hidden sm:table-cell",children:(0,r.jsx)(l.default,{alt:e.name,className:"aspect-square rounded-md object-cover",height:"64",src:e.image||"https://placehold.co/64x64.png",width:"64"})}),(0,r.jsx)(m.nA,{children:e.sku}),(0,r.jsx)(m.nA,{className:"font-medium",children:e.name}),(0,r.jsxs)(m.nA,{className:"hidden md:table-cell",children:["$",null!=(a=null==(s=e.price)?void 0:s.toFixed(2))?a:"0.00"]}),(0,r.jsx)(m.nA,{className:"hidden md:table-cell",children:e.stock})]},e.id)})})]})})]})]}),(0,r.jsx)(p.E,{open:N,onOpenChange:b,product:w||{name:"",price:0,stock:0,status:"Activo"},onProductSaved:()=>{b(!1),C(null),F()},generateSku:()=>0===e.length?"1":(e.reduce((e,s)=>{let a=parseInt(s.sku||"0",10);return!isNaN(a)&&a>e?a:e},0)+1).toString()}),(0,r.jsx)(R,{open:y,onOpenChange:k,product:w,onEdit:e=>{C(e),k(!1),b(!0)},onDelete:P,onDataChange:F})]})}},8539:(e,s,a)=>{"use strict";a.d(s,{T:()=>n});var r=a(5155),t=a(2115),l=a(9434);let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...t})});n.displayName="Textarea"}},e=>{var s=s=>e(e.s=s);e.O(0,[130,134,131,655,889,240,441,684,358],()=>s(934)),_N_E=e.O()}]);