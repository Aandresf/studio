"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{285:(e,t,a)=>{a.d(t,{$:()=>i,r:()=>d});var s=a(5155),r=a(2115),n=a(4253),o=a(2085),l=a(9434);let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,size:o,asChild:i=!1,...c}=e,f=i?n.DX:"button";return(0,s.jsx)(f,{className:(0,l.cn)(d({variant:r,size:o,className:a})),ref:t,...c})});i.displayName="Button"},1689:(e,t,a)=>{a.d(t,{Kf:()=>b,dj:()=>j,tP:()=>N});var s=a(5155),r=a(2115),n=a(478),o=a(8127),l=a(4371),d=a(9434);let i=[],c={toasts:[]};function f(e){c=m(c,e),i.forEach(e=>e(c))}let m=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,3)};case"DISMISS_TOAST":let{toastId:a}=t;return a?p(a):e.toasts.forEach(e=>{p(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)};case"REMOVE_TOAST":return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};default:return e}},u=new Map,p=e=>{if(u.has(e))return;let t=setTimeout(()=>{u.delete(e),f({type:"REMOVE_TOAST",toastId:e})},1e6);u.set(e,t)},x=0;function h(e){let t=(x=(x+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>f({type:"DISMISS_TOAST",toastId:t});if(f({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),e.duration){let s=setTimeout(()=>{a()},e.duration);u.set(t,s)}return{id:t,dismiss:a}}let g=e=>{let{text:t}=e,[a,o]=r.useState(!1);return(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t),o(!0),setTimeout(()=>o(!1),2e3)},className:"p-1 ml-4 text-current rounded-md hover:bg-white/20 focus:outline-none",children:(0,s.jsx)(n.A,{className:(0,d.cn)("h-5 w-5",a&&"text-green-400")})})},y=e=>{let{text:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsx)("p",{className:"text-sm font-medium break-all",children:t}),(0,s.jsx)(g,{text:t})]})};function N(e,t){h({title:e,description:t,duration:5e3,variant:"success",icon:(0,s.jsx)(o.A,{className:"h-6 w-6"})})}function b(e,t){h({title:e,description:(0,s.jsx)(y,{text:t}),duration:5e3,variant:"destructive",icon:(0,s.jsx)(l.A,{className:"h-6 w-6"})})}function j(){let[e,t]=r.useState(c);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[]),{...e,toast:h,dismiss:e=>f({type:"DISMISS_TOAST",toastId:e})}}},2523:(e,t,a)=>{a.d(t,{p:()=>o});var s=a(5155),r=a(2115),n=a(9434);let o=r.forwardRef((e,t)=>{let{className:a,type:r,...o}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...o})});o.displayName="Input"},4165:(e,t,a)=>{a.d(t,{Cf:()=>u,Es:()=>x,HM:()=>f,L3:()=>h,c7:()=>p,lG:()=>d,rr:()=>g,zM:()=>i});var s=a(5155),r=a(2115),n=a(5821),o=a(5318),l=a(9434);let d=n.bL,i=n.l9,c=n.ZL,f=n.bm,m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 backdrop-blur-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});m.displayName=n.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:a,children:r,hideCloseButton:d,...i}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[r,!d&&(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.UC.displayName;let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};p.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=n.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=n.VY.displayName},5057:(e,t,a)=>{a.d(t,{J:()=>i});var s=a(5155),r=a(2115),n=a(968),o=a(2085),l=a(9434);let d=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,l.cn)(d(),a),...r})});i.displayName=n.b.displayName},5731:(e,t,a)=>{a.d(t,{D0:()=>C,DD:()=>c,DQ:()=>U,Dv:()=>k,E6:()=>p,GZ:()=>P,I7:()=>l,Kq:()=>D,LU:()=>E,M6:()=>y,OU:()=>v,Q4:()=>S,Rr:()=>I,Td:()=>L,WY:()=>d,Zx:()=>j,aL:()=>f,d$:()=>o,dF:()=>u,ei:()=>J,er:()=>w,iR:()=>x,iV:()=>O,oG:()=>g,qL:()=>b,r5:()=>T,rU:()=>h,sf:()=>m,vN:()=>R,vc:()=>i,xs:()=>z,y$:()=>A,zw:()=>N});var s=a(1689);let r="http://localhost:3001/api";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(r).concat(e),n={"Content-Type":"application/json",...t.headers},o={...t,headers:n};console.log("--- API Request ---\n    URL: ".concat(a,"\n    Method: ").concat(o.method||"GET","\n    Body: ").concat(o.body?o.body:"No Body","\n    -------------------"));try{let e=await fetch(a,o),t=await e.text();if(!e.ok){let r;try{r=JSON.parse(t)}catch(e){r={error:"El servidor respondi\xf3 con un error inesperado.",details:t}}let n=r.error||"Error HTTP: ".concat(e.status);throw console.error("--- API Error Response ---\n            URL: ".concat(a,"\n            Status: ").concat(e.status,"\n            Body: ").concat(t,"\n            ------------------------")),(0,s.Kf)("Error de API",n),Error(n)}if(204===e.status||0===t.length)return console.log("--- API Success Response (No Content) ---\n            URL: ".concat(a,"\n            Status: 204\n            ---------------------------------------")),null;let r=JSON.parse(t);return console.log("--- API Success Response ---\n        URL: ".concat(a,"\n        Status: ").concat(e.status,"\n        Response Body:"),r,"\n----------------------------"),r}catch(e){if(!(e instanceof Error&&e.message.includes("Error de API"))){let t=e instanceof Error?e.message:"Ocurri\xf3 un error de red o de conexi\xf3n.";console.error("--- Network or Parsing Error ---\n            URL: ".concat(a,"\n            Error: ").concat(t,"\n            --------------------------------")),(0,s.Kf)("Error de Conexi\xf3n",t)}throw e}}let o=()=>n("/products"),l=e=>n("/products/".concat(e,"/movements")),d=e=>n("/products",{method:"POST",body:JSON.stringify(e)}),i=(e,t)=>(console.log(JSON.stringify(t)),n("/products/".concat(e),{method:"PUT",body:JSON.stringify(t)})),c=e=>(console.log("Deleting product with ID: ".concat(e)),n("/products/".concat(e),{method:"DELETE"})),f=e=>n("/purchases",{method:"POST",body:JSON.stringify(e)}),m=()=>n("/purchases"),u=e=>n("/purchases",{method:"PUT",body:JSON.stringify(e)}),p=e=>n("/purchases",{method:"DELETE",body:JSON.stringify(e)}),x=e=>n("/purchases/details?id=".concat(encodeURIComponent(e))),h=()=>n("/sales"),g=e=>n("/sales/details?id=".concat(encodeURIComponent(e))),y=e=>n("/sales",{method:"POST",body:JSON.stringify(e)}),N=e=>n("/sales",{method:"PUT",body:JSON.stringify(e)}),b=e=>n("/sales",{method:"DELETE",body:JSON.stringify(e)}),j=()=>n("/dashboard/summary"),v=()=>n("/dashboard/recent-sales"),w=e=>n("/inventory/movements",{method:"POST",body:JSON.stringify(e)}),S=()=>n("/reports"),E=(e,t,a)=>n("/reports/".concat(e.toLowerCase()),{method:"POST",body:JSON.stringify({startDate:t,endDate:a})}),C=async(e,t)=>{let a="".concat(r,"/reports/inventory-excel");console.log("--- API Request (Excel Export) ---\n    URL: ".concat(a,"\n    Method: POST\n    Body: ").concat({startDate:e,endDate:t},"\n    -------------------"));try{let r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startDate:e,endDate:t})});if(!r.ok){let e,t=await r.text();try{e=JSON.parse(t)}catch(a){e={error:"El servidor respondi\xf3 con un error inesperado durante la exportaci\xf3n.",details:t}}let a=e.error||"Error HTTP: ".concat(r.status);throw(0,s.Kf)("Error de Exportaci\xf3n",a),Error(a)}let n=await r.blob(),o=window.URL.createObjectURL(n),l=document.createElement("a");l.href=o;let d=r.headers.get("content-disposition"),i="reporte-inventario-".concat(e,"-a-").concat(t,".xlsx");if(d&&-1!==d.indexOf("attachment")){let e=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(d);null!=e&&e[1]&&(i=e[1].replace(/['"]/g,""))}l.download=i,document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(o)}catch(e){if(!(e instanceof Error&&e.message.includes("Error de Exportaci\xf3n"))){let t=e instanceof Error?e.message:"Ocurri\xf3 un error de red o de conexi\xf3n.";(0,s.Kf)("Error de Conexi\xf3n",t)}throw e}},R=e=>n("/reports/".concat(e)),T=()=>n("/settings/store"),k=()=>n("/stores"),A=e=>n("/stores",{method:"POST",body:JSON.stringify({name:e})}),O=e=>n("/stores/active",{method:"POST",body:JSON.stringify({storeId:e})}),P=e=>n("/stores/".concat(e,"/details")),L=(e,t)=>n("/stores/".concat(e,"/details"),{method:"PUT",body:JSON.stringify(t)}),I=e=>n("/stores/".concat(e),{method:"DELETE"}),J=()=>n("/app/quit",{method:"POST"}),U=()=>n("/pending-transactions"),z=(e,t)=>n("/pending-transactions",{method:"POST",body:JSON.stringify({type:e,payload:t})}),D=e=>n("/pending-transactions/".concat(e),{method:"DELETE"})},6695:(e,t,a)=>{a.d(t,{BT:()=>i,Wu:()=>c,ZB:()=>d,Zp:()=>o,aR:()=>l});var s=a(5155),r=a(2115),n=a(9434);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});o.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});i.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},8856:(e,t,a)=>{a.d(t,{E:()=>n});var s=a(5155),r=a(9434);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...a})}},9240:(e,t,a)=>{a.r(t),a.d(t,{default:()=>en,useBackendStatus:()=>et});var s=a(5155),r=a(2115),n=a(6874),o=a.n(n),l=a(5695),d=a(8186),i=a(4815),c=a(7374),f=a(1603),m=a(5263),u=a(8639),p=a(2087),x=a(5546),h=a(7003),g=a(9434),y=a(285),N=a(5821),b=a(2085),j=a(5318);let v=N.bL,w=N.l9;N.bm;let S=N.ZL,E=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.hJ,{className:(0,g.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});E.displayName=N.hJ.displayName;let C=(0,b.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),R=r.forwardRef((e,t)=>{let{side:a="right",className:r,children:n,...o}=e;return(0,s.jsxs)(S,{children:[(0,s.jsx)(E,{}),(0,s.jsxs)(N.UC,{ref:t,className:(0,g.cn)(C({side:a}),r),...o,children:[n,(0,s.jsxs)(N.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});R.displayName=N.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.hE,{ref:t,className:(0,g.cn)("text-lg font-semibold text-foreground",a),...r})}).displayName=N.hE.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.VY,{ref:t,className:(0,g.cn)("text-sm text-muted-foreground",a),...r})}).displayName=N.VY.displayName;var T=a(6215),k=a(3158),A=a(518),O=a(154);let P=T.bL,L=T.l9;T.YJ,T.ZL,T.Pb,T.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...o}=e;return(0,s.jsxs)(T.ZP,{ref:t,className:(0,g.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...o,children:[n,(0,s.jsx)(k.A,{className:"ml-auto"})]})}).displayName=T.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(T.G5,{ref:t,className:(0,g.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=T.G5.displayName;let I=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(T.ZL,{children:(0,s.jsx)(T.UC,{ref:t,sideOffset:r,className:(0,g.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});I.displayName=T.UC.displayName;let J=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(T.q7,{ref:t,className:(0,g.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...n})});J.displayName=T.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:n,...o}=e;return(0,s.jsxs)(T.H_,{ref:t,className:(0,g.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(T.VF,{children:(0,s.jsx)(A.A,{className:"h-4 w-4"})})}),r]})}).displayName=T.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(T.hN,{ref:t,className:(0,g.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(T.VF,{children:(0,s.jsx)(O.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=T.hN.displayName;let U=r.forwardRef((e,t)=>{let{className:a,inset:r,...n}=e;return(0,s.jsx)(T.JU,{ref:t,className:(0,g.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...n})});U.displayName=T.JU.displayName;let z=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(T.wv,{ref:t,className:(0,g.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});z.displayName=T.wv.displayName;var D=a(5977);let _=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(D.bL,{ref:t,className:(0,g.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});_.displayName=D.bL.displayName;let B=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(D._V,{ref:t,className:(0,g.cn)("aspect-square h-full w-full",a),...r})});B.displayName=D._V.displayName;let M=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(D.H4,{ref:t,className:(0,g.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});M.displayName=D.H4.displayName;var V=a(4165),Z=a(9409),q=a(5057),F=a(5731),$=a(1689),K=a(8856),H=a(4301),G=a(172),W=a(2523);function Y(e){let{isOpen:t,onStoreSelected:a}=e,[n,o]=r.useState([]),[l,d]=r.useState(""),[i,c]=r.useState(""),[f,m]=r.useState(""),[u,p]=r.useState(!0),[x,h]=r.useState(!1),[g,N]=r.useState(!1),b=r.useCallback(()=>{p(!0),(0,F.Dv)().then(e=>{let{stores:t,activeStoreId:a}=e;o(t),d(a),c(a)}).catch(()=>(0,$.Kf)("Error","No se pudieron cargar las tiendas.")).finally(()=>p(!1))},[]);r.useEffect(()=>{t&&b()},[t,b]);let j=async()=>{if(!i)return void(0,$.Kf)("Error","Por favor, selecciona una tienda.");let e=n.find(e=>e.id===i);if(i===l)return void a(null==e?void 0:e.name);h(!0);try{await (0,F.iV)(i),(0,$.tP)("Tienda Cambiada","La tienda activa ha sido actualizada."),a(null==e?void 0:e.name)}catch(e){(0,$.Kf)("Error","No se pudo cambiar la tienda activa.")}finally{h(!1)}},v=async()=>{if(console.log("[Debug] Iniciando handleCreateStore..."),!f.trim())return void(0,$.Kf)("Error","El nombre de la tienda no puede estar vac\xedo.");N(!0),console.log('[Debug] Llamando a la API para crear la tienda: "'.concat(f,'"'));try{var e;let t=await (0,F.y$)(f);console.log("[Debug] API call success. Response:",t),o(e=>[...e,t]),m(""),(0,$.tP)("Tienda Creada",'La tienda "'.concat(t.name,'" ha sido creada.')),null==(e=document.getElementById("close-create-store-dialog"))||e.click()}catch(e){console.error("[Debug] API call failed:",e),(0,$.Kf)("Error","No se pudo crear la nueva tienda.")}finally{console.log("[Debug] Finalizando handleCreateStore."),N(!1)}};return(0,s.jsx)(V.lG,{open:t,onOpenChange:()=>{},children:(0,s.jsxs)(V.Cf,{className:"sm:max-w-lg",hideCloseButton:!0,children:[(0,s.jsxs)(V.c7,{className:"items-center text-center",children:[(0,s.jsx)(V.L3,{className:"text-2xl",children:"\xa1Bienvenido!"}),(0,s.jsx)(V.rr,{className:"text-base",children:"Para continuar, elige la tienda con la que deseas trabajar."})]}),(0,s.jsx)("div",{className:"py-8 px-6 space-y-4",children:(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsxs)("div",{className:"flex-grow space-y-2",children:[(0,s.jsx)(q.J,{className:"text-center block",children:"Tienda Activa"}),u?(0,s.jsx)(K.E,{className:"h-10 w-full"}):(0,s.jsxs)(Z.l6,{onValueChange:c,defaultValue:l,children:[(0,s.jsx)(Z.bq,{children:(0,s.jsx)(Z.yv,{placeholder:"Selecciona una tienda..."})}),(0,s.jsx)(Z.gC,{children:n.map(e=>(0,s.jsx)(Z.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsxs)(V.lG,{children:[(0,s.jsx)(V.zM,{asChild:!0,children:(0,s.jsx)(y.$,{variant:"outline",size:"icon",children:(0,s.jsx)(H.A,{className:"h-5 w-5"})})}),(0,s.jsxs)(V.Cf,{children:[(0,s.jsxs)(V.c7,{children:[(0,s.jsx)(V.L3,{children:"Crear Nueva Tienda"}),(0,s.jsx)(V.rr,{children:"Ingresa un nombre para tu nueva tienda. Se crear\xe1 una base de datos separada para ella."})]}),(0,s.jsxs)("div",{className:"py-4 space-y-2",children:[(0,s.jsx)(q.J,{htmlFor:"new-store-name",children:"Nombre de la Tienda"}),(0,s.jsx)(W.p,{id:"new-store-name",value:f,onChange:e=>m(e.target.value),placeholder:"Ej: Sucursal Centro"})]}),(0,s.jsxs)(V.Es,{children:[(0,s.jsx)(V.HM,{asChild:!0,children:(0,s.jsx)(y.$,{id:"close-create-store-dialog",variant:"ghost",children:"Cancelar"})}),(0,s.jsx)(y.$,{onClick:v,disabled:g,children:g?"Creando...":"Crear Tienda"})]})]})]})]})}),(0,s.jsxs)(V.Es,{className:"flex-row justify-between sm:justify-between",children:[(0,s.jsx)(y.$,{variant:"destructive",onClick:()=>{(0,F.ei)().catch(()=>{})},children:"Cerrar Aplicaci\xf3n"}),(0,s.jsxs)(y.$,{onClick:j,disabled:u||x,size:"lg",children:[x&&(0,s.jsx)(G.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Acceder"]})]})]})})}var Q=a(6695);function X(){return(0,s.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center bg-background",children:(0,s.jsxs)(Q.Zp,{className:"w-full max-w-sm",children:[(0,s.jsxs)(Q.aR,{className:"text-center",children:[(0,s.jsx)(Q.ZB,{className:"text-2xl",children:"Inventario Studio"}),(0,s.jsx)(Q.BT,{children:"Iniciando servicios. Por favor, espere un momento."})]}),(0,s.jsx)(Q.Wu,{className:"flex items-center justify-center",children:(0,s.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})]})})}let ee=r.createContext(null),et=()=>{let e=r.useContext(ee);if(!e)throw Error("useBackendStatus must be used within a BackendStatusProvider");return e},ea=[{href:"/dashboard",icon:d.A,label:"Panel de Control"},{href:"/sales",icon:i.A,label:"Ventas"},{href:"/purchases",icon:c.A,label:"Compras"},{href:"/products",icon:f.A,label:"Productos"},{href:"/reports",icon:m.A,label:"Informes"}];function es(){let e=(0,l.usePathname)();return(0,s.jsx)("nav",{className:"flex flex-col items-start px-2 text-sm font-medium lg:px-4 gap-1",children:ea.map(t=>(0,s.jsxs)(o(),{href:t.href,className:(0,g.cn)("flex w-full items-center gap-3 rounded-lg px-3 py-2 text-muted-foreground transition-all hover:text-primary",e.startsWith(t.href)&&"text-primary bg-muted"),children:[(0,s.jsx)(t.icon,{className:"h-4 w-4"}),t.label]},t.label))})}function er(){let{isBackendReady:e}=et();return(0,s.jsx)("div",{className:"flex items-center gap-2",title:e?"Backend Conectado":"Backend Desconectado",children:e?(0,s.jsx)(u.A,{className:"h-5 w-5 text-green-500"}):(0,s.jsx)(p.A,{className:"h-5 w-5 text-red-500"})})}function en(e){let{children:t}=e,a=(0,l.useRouter)(),[n,d]=r.useState(!1),[i,c]=r.useState("Mi Cuenta"),[f,m]=r.useState(!1),[u,p]=r.useState(0),g=async()=>{try{let{stores:e,activeStoreId:t}=await getStores(),a=e.find(e=>e.id===t);a&&c(a.name)}catch(e){}};r.useEffect(()=>{f&&g()},[f,u]),r.useEffect(()=>{if(f)return void d(!0);let e=setInterval(async()=>{try{(await fetch("http://localhost:3001/api/health")).ok&&(console.log("Backend is ready, updating state."),m(!0),clearInterval(e))}catch(e){console.log("Waiting for backend...")}},2e3);return()=>clearInterval(e)},[f]);let N=()=>{p(e=>e+1)};return f?(0,s.jsx)(ee.Provider,{value:{isBackendReady:f,triggerRefetch:N,refetchKey:u},children:(0,s.jsxs)("div",{className:"grid h-screen w-full md:grid-cols-[220px_1fr] lg:grid-cols-[280px_1fr]",children:[(0,s.jsx)("div",{className:"hidden border-r bg-card md:block",children:(0,s.jsxs)("div",{className:"flex h-full max-h-screen flex-col gap-2",children:[(0,s.jsx)("div",{className:"flex h-14 items-center border-b px-4 lg:h-[60px] lg:px-6",children:(0,s.jsxs)(o(),{href:"/",className:"flex items-center gap-2 font-semibold text-primary",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-6 h-6",children:[(0,s.jsx)("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),(0,s.jsx)("path",{d:"m3.3 7 8.7 5 8.7-5"}),(0,s.jsx)("path",{d:"M12 22V12"})]}),(0,s.jsx)("span",{className:"",children:"InventarioSimple"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-auto py-2",children:(0,s.jsx)(es,{})}),(0,s.jsx)("div",{className:"mt-auto p-4",children:(0,s.jsx)(er,{})})]})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("header",{className:"flex h-14 items-center gap-4 border-b bg-card px-4 lg:h-[60px] lg:px-6 z-30",children:[(0,s.jsxs)(v,{children:[(0,s.jsx)(w,{asChild:!0,children:(0,s.jsxs)(y.$,{variant:"outline",size:"icon",className:"shrink-0 md:hidden",children:[(0,s.jsx)(x.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),(0,s.jsxs)(R,{side:"left",className:"flex flex-col p-0",children:[(0,s.jsx)("div",{className:"flex h-14 items-center border-b px-4 lg:h-[60px] lg:px-6",children:(0,s.jsxs)(o(),{href:"/",className:"flex items-center gap-2 font-semibold text-primary",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-6 h-6",children:[(0,s.jsx)("path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}),(0,s.jsx)("path",{d:"m3.3 7 8.7 5 8.7-5"}),(0,s.jsx)("path",{d:"M12 22V12"})]}),(0,s.jsx)("span",{className:"",children:"InventarioSimple"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-auto py-2",children:(0,s.jsx)(es,{})}),(0,s.jsx)("div",{className:"mt-auto p-4",children:(0,s.jsx)(er,{})})]})]}),(0,s.jsx)("div",{className:"w-full flex-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-muted-foreground",children:[(0,s.jsx)(h.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:i})]}),(0,s.jsxs)(P,{children:[(0,s.jsx)(L,{asChild:!0,children:(0,s.jsxs)(y.$,{variant:"secondary",size:"icon",className:"rounded-full",children:[(0,s.jsxs)(_,{className:"h-8 w-8",children:[(0,s.jsx)(B,{src:"https://placehold.co/32x32.png",alt:"Avatar de usuario"}),(0,s.jsx)(M,{children:"U"})]}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle user menu"})]})}),(0,s.jsxs)(I,{align:"end",children:[(0,s.jsx)(U,{children:i}),(0,s.jsx)(z,{}),(0,s.jsx)(J,{onSelect:()=>a.push("/settings"),children:"Configuraci\xf3n"}),(0,s.jsx)(J,{children:"Soporte"}),(0,s.jsx)(z,{}),(0,s.jsx)(J,{onSelect:()=>d(!0),children:"Cambiar Tienda"})]})]})]}),(0,s.jsx)("main",{className:"flex flex-1 flex-col gap-4 p-4 lg:gap-6 lg:p-6 overflow-auto",children:t}),(0,s.jsx)(Y,{isOpen:n,onStoreSelected:e=>{d(!1),e&&c(e),N()}})]})]})}):(0,s.jsx)(X,{})}},9409:(e,t,a)=>{a.d(t,{bq:()=>m,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>f});var s=a(5155),r=a(2115),n=a(3433),o=a(9556),l=a(7381),d=a(518),i=a(9434);let c=n.bL;n.YJ;let f=n.WT,m=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(n.l9,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(n.In,{asChild:!0,children:(0,s.jsx)(o.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.l9.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.PP,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});u.displayName=n.PP.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.wn,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})});p.displayName=n.wn.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,position:o="popper",...l}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsxs)(n.UC,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:o,...l,children:[(0,s.jsx)(u,{}),(0,s.jsx)(n.LM,{className:(0,i.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(p,{})]})})});x.displayName=n.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.JU,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=n.JU.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(n.q7,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),(0,s.jsx)(n.p4,{children:r})]})});h.displayName=n.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.wv.displayName},9434:(e,t,a)=>{a.d(t,{cn:()=>n});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}}]);