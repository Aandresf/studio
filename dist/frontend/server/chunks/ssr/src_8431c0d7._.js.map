{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oGACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,8OAAC,kKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\r\n\r\nimport {cn} from '@/lib/utils';\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\r\n  ({className, ...props}, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\nTextarea.displayName = 'Textarea';\r\n\r\nexport {Textarea};\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/dialogs/ProductDialog.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Switch } from '@/components/ui/switch';\nimport { toastSuccess, toastError } from '@/hooks/use-toast';\nimport { Textarea } from '@/components/ui/textarea';\nimport { createProduct, updateProduct } from '@/lib/api';\nimport { Product } from '@/lib/types';\n\ninterface ProductDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  product: Partial<Product> | null;\n  onProductSaved: (product: Product) => void;\n  generateSku?: () => string;\n}\n\nexport function ProductDialog({ open, onOpenChange, product, onProductSaved, generateSku }: ProductDialogProps) {\n  const [editingProduct, setEditingProduct] = useState<Partial<Product> | null>(null);\n  const [isTaxExempt, setIsTaxExempt] = useState(false);\n  const [formErrors, setFormErrors] = useState<{ price?: string; stock?: string; tax_rate?: string }>({});\n\n  useEffect(() => {\n    if (product) {\n      const initialProduct = { ...product };\n      if (product.id === undefined && generateSku) {\n        initialProduct.sku = generateSku();\n      }\n      // Si no hay tasa de impuesto definida, se asume 16 por defecto.\n      if (initialProduct.tax_rate === undefined) {\n        initialProduct.tax_rate = 16.00;\n      }\n      setEditingProduct(initialProduct);\n      // El producto es exento si su tasa es 0.\n      setIsTaxExempt(initialProduct.tax_rate === 0);\n    } else {\n      setEditingProduct(null);\n      setIsTaxExempt(false); // Reset al cerrar\n    }\n  }, [product, generateSku]);\n\n  const handleSave = async () => {\n    if (!editingProduct) return;\n\n    const newErrors: { price?: string; stock?: string; tax_rate?: string } = {};\n    if (editingProduct.price === '' || editingProduct.price === null || isNaN(Number(editingProduct.price))) {\n      newErrors.price = 'El precio es obligatorio y debe ser un número.';\n    }\n    if (editingProduct.stock === '' || editingProduct.stock === null || isNaN(Number(editingProduct.stock))) {\n      newErrors.stock = 'El stock es obligatorio y debe ser un número.';\n    }\n    if (!isTaxExempt && (editingProduct.tax_rate === '' || editingProduct.tax_rate === null || isNaN(Number(editingProduct.tax_rate)))) {\n        newErrors.tax_rate = 'La tasa de impuesto es obligatoria y debe ser un número.';\n    }\n\n\n    setFormErrors(newErrors);\n\n    if (Object.keys(newErrors).length > 0) {\n      Object.values(newErrors).forEach(error => {\n        toastError(\"Error de validación\", error as string);\n      });\n      return;\n    }\n\n    const productToSave = {\n      ...editingProduct,\n      price: parseFloat(String(editingProduct.price)),\n      stock: parseInt(String(editingProduct.stock), 10),\n      status: editingProduct.status ?? 'Activo',\n      tax_rate: isTaxExempt ? 0 : parseFloat(String(editingProduct.tax_rate)),\n    };\n\n    try {\n      if ('id' in productToSave && productToSave.id) {\n        // UPDATE operation\n        await updateProduct(productToSave.id, productToSave);\n        onProductSaved(productToSave as Product); // Pass the local state which has the updates\n      } else {\n        // CREATE operation\n        const newProduct = await createProduct(productToSave); // newProduct has the ID from the backend\n        onProductSaved(newProduct); // Pass the backend response\n      }\n      handleClose();\n    } catch (e: any) {\n      console.error(\"Error al guardar el producto:\", e);\n      // The API layer already shows an error toast\n    }\n  };\n\n  const handleClose = () => {\n    onOpenChange(false);\n    setFormErrors({});\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>{editingProduct?.id ? 'Editar Producto' : 'Añadir Nuevo Producto'}</DialogTitle>\n          <DialogDescription>\n            {editingProduct?.id ? 'Modifica los detalles del producto.' : 'Completa los detalles para crear un nuevo producto.'}\n          </DialogDescription>\n        </DialogHeader>\n        {editingProduct && (\n          <div className=\"grid gap-4 py-4\">\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"name\" className=\"text-right\">Nombre</Label>\n              <Input id=\"name\" value={editingProduct.name} onChange={(e) => setEditingProduct({ ...editingProduct, name: e.target.value })} className=\"col-span-3\" />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"sku\" className=\"text-right\">SKU</Label>\n              <Input id=\"sku\" value={editingProduct.sku ?? ''} onChange={(e) => setEditingProduct({ ...editingProduct, sku: e.target.value })} className=\"col-span-3\" />\n            </div>\n            <div className=\"grid grid-cols-4 items-start gap-4\">\n              <Label htmlFor=\"description\" className=\"text-right pt-2\">Descripción</Label>\n              <Textarea id=\"description\" value={editingProduct.description ?? ''} onChange={(e) => setEditingProduct({ ...editingProduct, description: e.target.value })} className=\"col-span-3\" rows={3} />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"price\" className=\"text-right\">Precio</Label>\n              <Input\n                id=\"price\"\n                type=\"text\"\n                value={editingProduct.price ?? ''}\n                onChange={(e) => {\n                  setEditingProduct({ ...editingProduct, price: e.target.value });\n                  if (formErrors.price) setFormErrors({ ...formErrors, price: undefined });\n                }}\n                className={`col-span-3 ${formErrors.price ? 'border-red-500' : ''}`}\n              />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"stock\" className=\"text-right\">Stock</Label>\n              <Input\n                id=\"stock\"\n                type=\"text\"\n                value={editingProduct.stock ?? ''}\n                onChange={(e) => {\n                  setEditingProduct({ ...editingProduct, stock: e.target.value });\n                  if (formErrors.stock) setFormErrors({ ...formErrors, stock: undefined });\n                }}\n                className={`col-span-3 ${formErrors.stock ? 'border-red-500' : ''}`}\n              />\n            </div>\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n                <Label htmlFor=\"tax-exempt\" className=\"text-right\">Exento</Label>\n                <div className=\"flex items-center space-x-2 col-span-3\">\n                    <Switch\n                        id=\"tax-exempt\"\n                        checked={isTaxExempt}\n                        onCheckedChange={setIsTaxExempt}\n                    />\n                    <Label htmlFor=\"tax-exempt\" className=\"font-normal\">\n                        {isTaxExempt ? 'Sí, exento de impuestos' : 'No, sujeto a impuestos'}\n                    </Label>\n                </div>\n            </div>\n            {!isTaxExempt && (\n                <div className=\"grid grid-cols-4 items-center gap-4\">\n                    <Label htmlFor=\"tax_rate\" className=\"text-right\">Tasa (%)</Label>\n                    <Input\n                        id=\"tax_rate\"\n                        type=\"text\"\n                        value={editingProduct.tax_rate ?? '16'}\n                        onChange={(e) => {\n                            setEditingProduct({ ...editingProduct, tax_rate: e.target.value });\n                            if (formErrors.tax_rate) setFormErrors({ ...formErrors, tax_rate: undefined });\n                        }}\n                        className={`col-span-3 ${formErrors.tax_rate ? 'border-red-500' : ''}`}\n                    />\n                </div>\n            )}\n            <div className=\"grid grid-cols-4 items-center gap-4\">\n              <Label htmlFor=\"status\" className=\"text-right\">Estado</Label>\n              <div className=\"flex items-center space-x-2 col-span-3\">\n                <Switch\n                  id=\"status\"\n                  checked={editingProduct.status === 'Activo'}\n                  onCheckedChange={(isChecked) =>\n                    setEditingProduct({ ...editingProduct, status: isChecked ? 'Activo' : 'Inactivo' })\n                  }\n                />\n                <Label htmlFor=\"status\" className=\"font-normal\">\n                  {editingProduct.status}\n                </Label>\n              </div>\n            </div>\n          </div>\n        )}\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={handleClose}>Cancelar</Button>\n          <Button type=\"submit\" onClick={handleSave}>Guardar</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 660, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ScrollArea = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ScrollAreaPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative overflow-hidden\", className)}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\r\n      {children}\r\n    </ScrollAreaPrimitive.Viewport>\r\n    <ScrollBar />\r\n    <ScrollAreaPrimitive.Corner />\r\n  </ScrollAreaPrimitive.Root>\r\n))\r\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\r\n\r\nconst ScrollBar = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\r\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n    ref={ref}\r\n    orientation={orientation}\r\n    className={cn(\r\n      \"flex touch-none select-none transition-colors\",\r\n      orientation === \"vertical\" &&\r\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\r\n      orientation === \"horizontal\" &&\r\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\r\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n))\r\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\r\n\r\nexport { ScrollArea, ScrollBar }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,0KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,0KAAA,CAAA,SAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,0KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,0KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 728, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE","debugId":null}},
    {"offset": {"line": 770, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/dialogs/RegisterMovementDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { createInventoryMovement } from \"@/lib/api\";\nimport { toastSuccess, toastError } from \"@/hooks/use-toast\";\nimport { MovementType, Product } from \"@/lib/types\";\n\ninterface RegisterMovementDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  product: Product | null;\n  onMovementRegistered: () => void;\n}\n\nexport function RegisterMovementDialog({\n  open,\n  onOpenChange,\n  product,\n  onMovementRegistered,\n}: RegisterMovementDialogProps) {\n  const [type, setType] = React.useState<MovementType>('RETIRO');\n  const [quantity, setQuantity] = React.useState(1);\n  const [description, setDescription] = React.useState('');\n  const [isSaving, setIsSaving] = React.useState(false);\n\n  const handleSave = async () => {\n    if (!product) return;\n\n    if (quantity <= 0) {\n      toastError(\"Error de Validación\", \"La cantidad debe ser mayor que cero.\");\n      return;\n    }\n    if (quantity > product.stock) {\n      toastError(\"Error de Validación\", \"La cantidad a retirar no puede ser mayor que el stock actual.\");\n      return;\n    }\n\n    setIsSaving(true);\n\n    const movementData = {\n      product_id: product.id,\n      type,\n      quantity,\n      description,\n      unit_cost: 0, // Always send 0 for non-sale movements\n    };\n\n    console.log(\"Enviando al backend:\", JSON.stringify(movementData, null, 2));\n\n    try {\n      await createInventoryMovement(movementData);\n      toastSuccess(\"Movimiento Registrado\", \"El movimiento de inventario se ha registrado correctamente.\");\n      onMovementRegistered();\n      onOpenChange(false);\n    } catch (error) {\n      // Error is handled by the API layer\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // Reset state when dialog opens\n  React.useEffect(() => {\n    if (open) {\n      setType('RETIRO');\n      setQuantity(1);\n      setDescription('');\n    }\n  }, [open]);\n\n  if (!product) return null;\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Registrar Movimiento de Inventario</DialogTitle>\n          <DialogDescription>\n            Registra una salida de \"{product.name}\" que no sea una venta.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"grid gap-6 py-4\">\n          <div className=\"grid gap-3\">\n            <Label htmlFor=\"movement-type\">Tipo de Movimiento</Label>\n            <Select value={type} onValueChange={(value) => setType(value as MovementType)}>\n              <SelectTrigger id=\"movement-type\">\n                <SelectValue placeholder=\"Seleccione un tipo...\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"RETIRO\">Retiro (ej. producto dañado)</SelectItem>\n                <SelectItem value=\"AUTO-CONSUMO\">Autoconsumo (ej. uso interno)</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          <div className=\"grid gap-3\">\n            <Label htmlFor=\"quantity\">Cantidad</Label>\n            <Input\n              id=\"quantity\"\n              type=\"number\"\n              value={quantity}\n              onChange={(e) => setQuantity(Number(e.target.value))}\n              min=\"1\"\n              max={product.stock}\n            />\n            <p className=\"text-sm text-muted-foreground\">Stock actual: {product.stock}</p>\n          </div>\n          <div className=\"grid gap-3\">\n            <Label htmlFor=\"description\">Descripción (Opcional)</Label>\n            <Textarea\n              id=\"description\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              placeholder=\"Ej: Retiro por producto vencido\"\n            />\n          </div>\n        </div>\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={isSaving}>\n            Cancelar\n          </Button>\n          <Button onClick={handleSave} disabled={isSaving}>\n            {isSaving ? \"Guardando...\" : \"Registrar Movimiento\"}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1058, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/components/dialogs/ProductDetailDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n  DialogClose,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Product, InventoryMovement } from \"@/lib/types\";\nimport { getProductMovements } from \"@/lib/api\";\nimport { format } from \"date-fns\";\nimport { es } from \"date-fns/locale\";\nimport { ArrowDownCircle, ArrowUpCircle, Edit, Trash2, X, MinusCircle } from \"lucide-react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { RegisterMovementDialog } from \"./RegisterMovementDialog\";\n\ninterface ProductDetailDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  product: Product | null;\n  onEdit: (product: Product) => void;\n  onDelete: (productId: number) => void;\n  onDataChange: () => void; // To refetch product list\n}\n\nexport function ProductDetailDialog({\n  open,\n  onOpenChange,\n  product,\n  onEdit,\n  onDelete,\n  onDataChange,\n}: ProductDetailDialogProps) {\n  const [movements, setMovements] = React.useState<InventoryMovement[]>([]);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [isRegisterMovementOpen, setIsRegisterMovementOpen] = React.useState(false);\n\n  const fetchMovements = React.useCallback(() => {\n    if (product) {\n      setIsLoading(true);\n      getProductMovements(product.id)\n        .then(setMovements)\n        .catch(() => {\n          // Error handled by API layer\n        })\n        .finally(() => setIsLoading(false));\n    }\n  }, [product]);\n\n  React.useEffect(() => {\n    if (open && product) {\n      fetchMovements();\n    }\n  }, [open, product, fetchMovements]);\n\n  const handleMovementRegistered = () => {\n    fetchMovements();\n    onDataChange(); // Notify parent page to refetch product list\n  };\n\n  if (!product) return null;\n\n  const MovementRow = ({ move }: { move: InventoryMovement }) => {\n    const isEntry = move.type === 'ENTRADA';\n    const displayDate = move.transaction_date || move.created_at; // Fallback a created_at si transaction_date no está\n    return (\n      <TableRow>\n        <TableCell>\n          {format(new Date(displayDate), \"dd/MM/yyyy HH:mm\", { locale: es })}\n        </TableCell>\n        <TableCell>\n          <Badge variant={isEntry ? \"default\" : \"secondary\"} className=\"flex items-center w-fit\">\n            {isEntry ? <ArrowDownCircle className=\"mr-2 h-4 w-4 text-green-400\" /> : <ArrowUpCircle className=\"mr-2 h-4 w-4 text-red-400\" />}\n            {move.type}\n          </Badge>\n        </TableCell>\n        <TableCell className=\"text-right\">{move.quantity}</TableCell>\n        <TableCell className=\"text-right\">${move.unit_cost?.toFixed(2) ?? 'N/A'}</TableCell>\n        <TableCell className=\"text-muted-foreground truncate\" title={move.description}>{move.description}</TableCell>\n      </TableRow>\n    );\n  };\n\n  return (\n    <>\n      <Dialog open={open} onOpenChange={onOpenChange}>\n        <DialogContent className=\"max-w-4xl\">\n          <DialogHeader>\n            <DialogTitle>{product.name}</DialogTitle>\n            <DialogDescription>\n              SKU: {product.sku || \"N/A\"} - Historial completo de movimientos.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 my-4\">\n              <div className=\"md:col-span-1 space-y-4\">\n                  <h3 className=\"font-semibold border-b pb-2\">Detalles del Producto</h3>\n                  <div className=\"text-sm space-y-2\">\n                      <p><strong>Stock Actual:</strong> {product.stock}</p>\n                      <p><strong>Costo Promedio:</strong> ${product.price.toFixed(2)}</p>\n                      <p><strong>Tasa de Impuesto:</strong> {product.tax_rate}%</p>\n                      <div className=\"flex items-center gap-2\"><strong>Estado:</strong> <Badge variant={product.status === 'Activo' ? 'default' : 'destructive'}>{product.status}</Badge></div>\n                      {product.description && (\n                        <div className=\"pt-2\">\n                            <p className=\"font-semibold\">Descripción:</p>\n                            <p className=\"text-muted-foreground whitespace-pre-wrap\">{product.description}</p>\n                        </div>\n                      )}\n                  </div>\n              </div>\n              <div className=\"md:col-span-2\">\n                  <h3 className=\"font-semibold border-b pb-2 mb-2\">Historial de Movimientos (Kardex)</h3>\n                  <ScrollArea className=\"h-64\">\n                  <Table>\n                      <TableHeader>\n                      <TableRow>\n                          <TableHead>Fecha</TableHead>\n                          <TableHead>Tipo</TableHead>\n                          <TableHead className=\"text-right\">Cantidad</TableHead>\n                          <TableHead className=\"text-right\">Costo/Precio</TableHead>\n                          <TableHead>Descripción</TableHead>\n                      </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                          {isLoading ? (\n                              Array.from({ length: 3 }).map((_, i) => (\n                                  <TableRow key={i}>\n                                      <TableCell colSpan={5}><Skeleton className=\"h-5 w-full\" /></TableCell>\n                                  </TableRow>\n                              ))\n                          ) : movements.length > 0 ? (\n                              movements.map((move) => <MovementRow key={move.id} move={move} />)\n                          ) : (\n                              <TableRow>\n                                  <TableCell colSpan={5} className=\"text-center\">No hay movimientos para este producto.</TableCell>\n                              </TableRow>\n                          )}\n                      </TableBody>\n                  </Table>\n                  </ScrollArea>\n              </div>\n          </div>\n\n          <DialogFooter className=\"sm:justify-between\">\n            <Button variant=\"destructive\" onClick={() => onDelete(product.id)}>\n                <Trash2 className=\"mr-2 h-4 w-4\" />\n                Eliminar\n            </Button>\n            <div className=\"flex flex-wrap gap-2\">\n              <Button variant=\"outline\" onClick={() => setIsRegisterMovementOpen(true)}>\n                  <MinusCircle className=\"mr-2 h-4 w-4\" />\n                  Registrar Movimiento\n              </Button>\n              <Button onClick={() => onEdit(product)}>\n                  <Edit className=\"mr-2 h-4 w-4\" />\n                  Editar\n              </Button>\n            </div>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n      <RegisterMovementDialog\n        open={isRegisterMovementOpen}\n        onOpenChange={setIsRegisterMovementOpen}\n        product={product}\n        onMovementRegistered={handleMovementRegistered}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1602, "column": 0}, "map": {"version":3,"sources":["file:///C:/PROGRAMACION/INVENTARIO/studio/src/app/%28app%29/products/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react';\nimport Image from 'next/image';\nimport { PlusCircle, Search } from 'lucide-react';\n\nimport { useBackendStatus } from '@/app/(app)/layout';\nimport { getProducts, deleteProduct, getStoreDetails, getStores } from '@/lib/api';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader } from '@/components/ui/card';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Input } from '@/components/ui/input';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Product } from '@/lib/types';\nimport { ProductDialog } from '@/components/dialogs/ProductDialog';\nimport { ProductDetailDialog } from '@/components/dialogs/ProductDetailDialog';\nimport { toastSuccess } from '@/hooks/use-toast';\n\nfunction ProductTableSkeleton() {\n    return (\n        <Table>\n            <TableHeader>\n                <TableRow>\n                    <TableHead className=\"hidden w-[100px] sm:table-cell\">\n                        <span className=\"sr-only\">Imagen</span>\n                    </TableHead>\n                    <TableHead>Código</TableHead>\n                    <TableHead>Nombre</TableHead>\n                    <TableHead className=\"hidden md:table-cell\">Precio</TableHead>\n                    <TableHead className=\"hidden md:table-cell\">Stock</TableHead>\n                </TableRow>\n            </TableHeader>\n            <TableBody>\n                {Array.from({ length: 5 }).map((_, index) => (\n                    <TableRow key={index}>\n                        <TableCell className=\"hidden sm:table-cell\">\n                            <Skeleton className=\"h-16 w-16 rounded-md\" />\n                        </TableCell>\n                        <TableCell><Skeleton className=\"h-4 w-20\" /></TableCell>\n                        <TableCell><Skeleton className=\"h-4 w-32\" /></TableCell>\n                        <TableCell className=\"hidden md:table-cell\"><Skeleton className=\"h-4 w-16\" /></TableCell>\n                        <TableCell className=\"hidden md:table-cell\"><Skeleton className=\"h-4 w-12\" /></TableCell>\n                    </TableRow>\n                ))}\n            </TableBody>\n        </Table>\n    );\n}\n\nexport default function ProductsPage() {\n    const [products, setProducts] = useState<Product[]>([]);\n    const [storeSettings, setStoreSettings] = useState<any>({});\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [isCreateOrEditDialogOpen, setIsCreateOrEditDialogOpen] = useState(false);\n    const [isDetailDialogOpen, setIsDetailDialogOpen] = useState(false);\n    const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\n    const [searchQuery, setSearchQuery] = useState('');\n\n    const { isBackendReady, triggerRefetch, refetchKey } = useBackendStatus();\n\n    useEffect(() => {\n        if (!isBackendReady) {\n            setLoading(true);\n            setError(\"Esperando conexión con el backend...\");\n            return;\n        }\n\n        const fetchInitialData = async () => {\n            setLoading(true);\n            setError(null);\n            try {\n                const { activeStoreId } = await getStores();\n                const [productsData, settingsData] = await Promise.all([\n                    getProducts(),\n                    getStoreDetails(activeStoreId)\n                ]);\n                setProducts(productsData);\n                setStoreSettings(settingsData || {});\n            } catch (e: any) {\n                console.error(e);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchInitialData();\n    }, [isBackendReady, refetchKey]);\n\n    const generateNextSku = () => {\n        if (products.length === 0) return '1';\n        const maxSku = products.reduce((max, p) => {\n            const skuNumber = parseInt(p.sku || '0', 10);\n            return !isNaN(skuNumber) && skuNumber > max ? skuNumber : max;\n        }, 0);\n        return (maxSku + 1).toString();\n    };\n\n    const handleAddNew = () => {\n        setSelectedProduct(null); // Clear selection\n        setIsCreateOrEditDialogOpen(true);\n    };\n\n    const handleDelete = async (id: number) => {\n        if (!confirm(\"¿Estás seguro de que quieres eliminar este producto? Esta acción no se puede deshacer.\")) return;\n\n        try {\n            await deleteProduct(id);\n            toastSuccess(\"Producto Eliminado\", \"El producto ha sido eliminado correctamente.\");\n            setIsDetailDialogOpen(false); // Close detail view\n            setSelectedProduct(null);\n            triggerRefetch();\n        } catch (e: any) {\n            console.error(\"Error al eliminar el producto:\", e);\n        }\n    };\n\n    const handleEdit = (product: Product) => {\n        setSelectedProduct(product);\n        setIsDetailDialogOpen(false); // Close detail view\n        setIsCreateOrEditDialogOpen(true); // Open edit view\n    };\n    \n    const handleRowClick = (product: Product) => {\n        setSelectedProduct(product);\n        setIsDetailDialogOpen(true);\n    };\n\n    const handleProductSaved = () => {\n        setIsCreateOrEditDialogOpen(false);\n        setSelectedProduct(null);\n        triggerRefetch();\n    };\n\n    const filteredProducts = products.filter(product => {\n        const showInactive = storeSettings.advanced?.showInactiveProducts || false;\n        if (!showInactive && product.status === 'Inactivo') {\n            return false;\n        }\n        const query = searchQuery.toLowerCase();\n        const nameMatch = product.name.toLowerCase().includes(query);\n        const skuMatch = product.sku?.toLowerCase().includes(query) ?? false;\n        return nameMatch || skuMatch;\n    });\n\n    return (\n        <>\n            <div className=\"flex flex-col gap-6\">\n                <div className=\"flex items-center\">\n                    <div className=\"flex-1\">\n                        <h1 className=\"font-semibold text-lg md:text-2xl\">Productos</h1>\n                        <p className=\"text-sm text-muted-foreground\">Gestiona tus productos aquí.</p>\n                    </div>\n                    <Button size=\"sm\" className=\"gap-1\" onClick={handleAddNew}>\n                        <PlusCircle className=\"h-3.5 w-3.5\" />\n                        <span className=\"sr-only sm:not-sr-only sm:whitespace-nowrap\">\n                            Añadir Producto\n                        </span>\n                    </Button>\n                </div>\n                <Card>\n                    <CardHeader>\n                        <div className=\"relative\">\n                            <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n                            <Input\n                                type=\"search\"\n                                placeholder=\"Buscar por nombre o código...\"\n                                className=\"w-full appearance-none bg-background pl-8 shadow-none md:w-1/3 lg:w-1/3\"\n                                value={searchQuery}\n                                onChange={(e) => setSearchQuery(e.target.value)}\n                            />\n                        </div>\n                    </CardHeader>\n                    <CardContent>\n                        {loading ? (\n                            <ProductTableSkeleton />\n                        ) : error ? (\n                            <div className=\"text-center py-10 text-red-500\">{error}</div>\n                        ) : (\n                            <Table>\n                                <TableHeader>\n                                    <TableRow>\n                                        <TableHead className=\"hidden w-[100px] sm:table-cell\">Imagen</TableHead>\n                                        <TableHead>Código</TableHead>\n                                        <TableHead>Nombre</TableHead>\n                                        <TableHead className=\"hidden md:table-cell\">Precio</TableHead>\n                                        <TableHead className=\"hidden md:table-cell\">Stock</TableHead>\n                                    </TableRow>\n                                </TableHeader>\n                                <TableBody>\n                                    {filteredProducts.map(product => (\n                                        <TableRow key={product.id} onClick={() => handleRowClick(product)} className=\"cursor-pointer\">\n                                            <TableCell className=\"hidden sm:table-cell\">\n                                                <Image\n                                                    alt={product.name}\n                                                    className=\"aspect-square rounded-md object-cover\"\n                                                    height=\"64\"\n                                                    src={product.image || \"https://placehold.co/64x64.png\"}\n                                                    width=\"64\"\n                                                />\n                                            </TableCell>\n                                            <TableCell>{product.sku}</TableCell>\n                                            <TableCell className=\"font-medium\">{product.name}</TableCell>\n                                            <TableCell className=\"hidden md:table-cell\">${product.price?.toFixed(2) ?? '0.00'}</TableCell>\n                                            <TableCell className=\"hidden md:table-cell\">{product.stock}</TableCell>\n                                        </TableRow>\n                                    ))}\n                                </TableBody>\n                            </Table>\n                        )}\n                    </CardContent>\n                </Card>\n            </div>\n\n            <ProductDialog\n                open={isCreateOrEditDialogOpen}\n                onOpenChange={setIsCreateOrEditDialogOpen}\n                product={selectedProduct || { name: '', price: 0, stock: 0, status: 'Activo' }}\n                onProductSaved={handleProductSaved}\n                generateSku={generateNextSku}\n            />\n\n            <ProductDetailDialog\n                open={isDetailDialogOpen}\n                onOpenChange={setIsDetailDialogOpen}\n                product={selectedProduct}\n                onEdit={handleEdit}\n                onDelete={handleDelete}\n                onDataChange={triggerRefetch}\n            />\n        </>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}